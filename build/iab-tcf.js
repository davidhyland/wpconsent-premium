(()=>{var e={2613:()=>{!function(){"use strict";if(!window.wpconsent||!window.wpconsent.iab_tcf_enabled)return;const e=function(){window.WPConsent&&window.WPConsent.addHook?(window.WPConsent.addHook("afterShowPreferences",(function(){window.WPConsentCMPAPI&&"function"==typeof window.WPConsentCMPAPI.notifyUIVisible&&window.WPConsentCMPAPI.notifyUIVisible()})),window.WPConsent.addHook("afterShowBanner",(function(){window.WPConsentCMPAPI&&"function"==typeof window.WPConsentCMPAPI.notifyUIVisible&&window.WPConsentCMPAPI.notifyUIVisible()})),window.WPConsent.addHook("afterHideBanner",(function(){window.WPConsentCMPAPI&&"function"==typeof window.WPConsentCMPAPI.notifyUIHidden&&window.WPConsentCMPAPI.notifyUIHidden()})),window.WPConsent.addHook("accordionToggled",(function(e){const{accordion:s,content:n,isActive:o,isService:i}=e;s.hasAttribute("data-iab-vendor")&&t(o?"vendorDetailsOpened":"vendorDetailsClosed",s)}))):setTimeout(e,100)},t=function(e,t){const s=t.getAttribute("data-vendor-data"),n=t.getAttribute("data-vendor-id");if(s&&n)try{const o=JSON.parse(s),i=new CustomEvent(e,{detail:{vendorId:n,vendorData:o,accordion:t,content:t.querySelector(".wpconsent-preferences-accordion-content")}});document.dispatchEvent(i)}catch(e){console.error("Error parsing vendor data for event:",e)}};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e()}()},8876:()=>{class e{constructor(){this.purposesCache=null,this.specialPurposesCache=null,this.featuresCache=null,this.specialFeaturesCache=null,this.dataCategoriesCache=null,document.addEventListener("vendorDetailsOpened",this.handleVendorOpened.bind(this)),document.addEventListener("vendorDetailsClosed",this.handleVendorClosed.bind(this))}handleVendorOpened(e){const{vendorData:t,content:s}=e.detail;t&&s&&this.buildVendorDescription(t,s)}handleVendorClosed(e){}async buildVendorDescription(e,t){try{let s=t.querySelector(".wpconsent-vendor-details");if(s||(s=t.querySelector('p[tabindex="0"]:first-child')),!s)return;if(s.hasAttribute("data-description-loaded"))return;await this.loadReferenceData();const n=[],o=s.innerHTML;o&&n.push(o);const i=this.buildVendorPurposesInfo(e);i&&n.push(i);const r=this.buildVendorFeaturesInfo(e);r&&n.push(r);const a=this.buildVendorDataCategoriesInfo(e);a&&n.push(a);const c=this.buildVendorLifecycleInfo(e);if(c&&n.push(c),e.policyUrl&&n.push(this.buildPrivacyPolicyLink(e.policyUrl)),e.legIntClaimUrl&&n.push(this.buildLegitimateInterestLink(e.legIntClaimUrl)),e.deviceStorageDisclosureUrl&&n.push(this.buildDeviceStorageLink(e.deviceStorageDisclosureUrl)),e.urls&&e.urls.length>0){const t=e.urls[0];t.privacy&&t.privacy!==e.policyUrl&&n.push(this.buildPrivacyPolicyLink(t.privacy)),t.legIntClaim&&t.legIntClaim!==e.legIntClaimUrl&&n.push(this.buildLegitimateInterestLink(t.legIntClaim))}s.innerHTML=n.join("<br><br>"),s.setAttribute("data-description-loaded","true")}catch(e){console.error("Error building vendor description:",e)}}async loadReferenceData(){if(window.WPConsentIABTabs&&window.WPConsentIABTabs.gvl){const e=window.WPConsentIABTabs.gvl;return await e.readyPromise,this.purposesCache=e.purposes||{},this.specialPurposesCache=e.specialPurposes||{},this.featuresCache=e.features||{},this.specialFeaturesCache=e.specialFeatures||{},void(this.dataCategoriesCache=e.dataCategories||{})}this.purposesCache={1:{name:"Store and/or access information on a device"},2:{name:"Select basic ads"},3:{name:"Create a personalised ads profile"},4:{name:"Select personalised ads"},5:{name:"Create a personalised content profile"},6:{name:"Select personalised content"},7:{name:"Measure ad performance"},8:{name:"Measure content performance"},9:{name:"Apply market research to generate audience insights"},10:{name:"Develop and improve products"},11:{name:"Use limited data to select advertising"},12:{name:"Use profiles to select personalised advertising"},13:{name:"Use profiles to select personalised content"},14:{name:"Actively scan device characteristics for identification"}},this.specialPurposesCache={1:{name:"Ensure security, prevent fraud, and debug"},2:{name:"Technically deliver ads or content"}},this.featuresCache={1:{name:"Match and combine offline data sources"},2:{name:"Link different devices"},3:{name:"Receive and use automatically-sent device characteristics for identification"}},this.specialFeaturesCache={1:{name:"Use precise geolocation data"},2:{name:"Actively scan device characteristics for identification"}},this.dataCategoriesCache={1:{name:"IP addresses"},2:{name:"Device characteristics"},3:{name:"Device identifiers"},4:{name:"Probabilistic identifiers"},5:{name:"Authentication-derived identifiers"},6:{name:"Browsing and interaction data"},7:{name:"User-provided data"},8:{name:"Non-precise location data"},9:{name:"Precise location data"},10:{name:"Users' profiles"},11:{name:"Privacy choices"}}}buildVendorPurposesInfo(e){const t=[],s=e.dataRetention||{},n=s.purposes||{},o=s.specialPurposes||{},i=s.stdRetention||null;if(e.purposes&&e.purposes.length>0){const s=[];e.purposes.forEach((e=>{if(this.purposesCache[e]&&this.purposesCache[e].name){let t=this.escapeHtml(this.purposesCache[e].name);const o=n[e]||i;o&&(t+=` (${this.getTranslation("retention:")} ${o} ${this.getTranslation("days")})`),s.push(t)}})),s.length>0&&t.push(`<strong>${this.getTranslation("Purposes:")} </strong>${s.join(", ")}`)}if(e.legIntPurposes&&e.legIntPurposes.length>0){const s=[];if(e.legIntPurposes.forEach((e=>{if(this.purposesCache[e]&&this.purposesCache[e].name){let t=this.escapeHtml(this.purposesCache[e].name);const o=n[e]||i;o&&(t+=` (${this.getTranslation("retention:")} ${o} ${this.getTranslation("days")})`),s.push(t)}})),s.length>0){let e=`<strong>${this.getTranslation("Legitimate Interest Purposes:")} </strong>${s.join(", ")}`;e+=`<br><em>${this.getTranslation("Processes:")} ${this.getTranslation("unique identifiers, browsing data, device information")}</em>`,e+=`<br><em>${this.getTranslation("Scope:")} ${this.getTranslation("Service-specific processing")}</em>`,t.push(e)}}if(e.specialPurposes&&e.specialPurposes.length>0){const s=[];e.specialPurposes.forEach((e=>{if(this.specialPurposesCache[e]&&this.specialPurposesCache[e].name){let t=this.escapeHtml(this.specialPurposesCache[e].name);const n=o[e]||i;n&&(t+=` (${this.getTranslation("retention:")} ${n} ${this.getTranslation("days")})`),s.push(t)}})),s.length>0&&t.push(`<strong>${this.getTranslation("Special Purposes:")} </strong>${s.join(", ")}`)}return t.join("<br>")}buildVendorFeaturesInfo(e){const t=[];if(e.features&&e.features.length>0){const s=this.getPurposeNames(e.features,this.featuresCache);s.length>0&&t.push(`<strong>${this.getTranslation("Features:")} </strong>${s.join(", ")}`)}if(e.specialFeatures&&e.specialFeatures.length>0){const s=this.getPurposeNames(e.specialFeatures,this.specialFeaturesCache);s.length>0&&t.push(`<strong>${this.getTranslation("Special Features:")} </strong>${s.join(", ")}`)}return t.join("<br>")}buildVendorDataCategoriesInfo(e){if(!e.dataDeclaration||0===e.dataDeclaration.length)return"";const t=[];return e.dataDeclaration.forEach((e=>{this.dataCategoriesCache[e]&&this.dataCategoriesCache[e].name&&t.push(this.escapeHtml(this.dataCategoriesCache[e].name))})),0===t.length?"":`<strong>${this.getTranslation("Data Categories:")} </strong>${t.join(", ")}`}buildVendorLifecycleInfo(e){const t=[];if(e.cookieMaxAgeSeconds){const s=Math.ceil(e.cookieMaxAgeSeconds/86400);let n=`${this.getTranslation("Up to")} ${s} ${this.getTranslation("days")}`;!0===e.cookieRefresh&&(n+=` (${this.getTranslation("duration refreshes from your last interaction with the property")})`),t.push(`<strong>${this.getTranslation("Cookie Storage:")} </strong>${n}`)}if(e.usesNonCookieAccess&&t.push(`<strong>${this.getTranslation("Data Processing:")} </strong>${this.getTranslation("May use non-cookie methods for data collection and processing")}`),e.dataRetention&&Object.keys(e.dataRetention).length>0){const s=this.buildDataRetentionInfo(e.dataRetention);s&&t.push(`<strong>${this.getTranslation("Data Retention:")} </strong>${s}`)}return t.join("<br>")}buildDataRetentionInfo(e){const t=[];if(e.stdRetention){const s=e.stdRetention;t.push(`${this.getTranslation("Standard")}: ${s} ${this.getTranslation("days")}`)}return t.join(", ")}buildPrivacyPolicyLink(e){return`${this.getTranslation("For more information, see their")} <a href="${this.escapeHtml(e)}" target="_blank" rel="noopener noreferrer">${this.getTranslation("privacy policy")}</a>.`}buildLegitimateInterestLink(e){return`${this.getTranslation("View their")} <a href="${this.escapeHtml(e)}" target="_blank" rel="noopener noreferrer">${this.getTranslation("legitimate interest disclosure")}</a>.`}buildDeviceStorageLink(e){return`${this.getTranslation("View their")} <a href="${this.escapeHtml(e)}" target="_blank" rel="noopener noreferrer">${this.getTranslation("device storage disclosure")}</a> ${this.getTranslation("for details about data storage")}.`}getPurposeNames(e,t){if(!e||!t)return[];const s=[];return e.forEach((e=>{t[e]&&t[e].name&&s.push(this.escapeHtml(t[e].name))})),s}getTranslation(e){if(window.wpconsent&&window.wpconsent.iab_tcf_translations){const t=window.wpconsent.iab_tcf_translations;if(t[e])return t[e]}return{"Purposes:":"Purposes:","Legitimate Interest Purposes:":"Legitimate Interest Purposes:","Special Purposes:":"Special Purposes:","Features:":"Features:","Special Features:":"Special Features:","Data Categories:":"Data Categories:","Cookie Storage:":"Cookie Storage:","Data Processing:":"Data Processing:","Data Retention:":"Data Retention:","Up to":"Up to",days:"days","retention:":"retention:",Standard:"Standard","duration refreshes from your last interaction with the property":"duration refreshes from your last interaction with the property","May use non-cookie methods for data collection and processing":"May use non-cookie methods for data collection and processing","For more information, see their":"For more information, see their","privacy policy":"privacy policy","View their":"View their","legitimate interest disclosure":"legitimate interest disclosure","device storage disclosure":"device storage disclosure","for details about data storage":"for details about data storage"}[e]||e}escapeHtml(e){const t=document.createElement("div");return t.textContent=e,t.innerHTML}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",(()=>{new e})):new e}},t={};function s(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,s),i.exports}(()=>{"use strict";class e extends Error{constructor(e){super(e),this.name="DecodingError"}}class t extends Error{constructor(e){super(e),this.name="EncodingError"}}class n extends Error{constructor(e){super(e),this.name="GVLError"}}class o extends Error{constructor(e,t,s=""){super(`invalid value ${t} passed for ${e} ${s}`),this.name="TCModelError"}}class i{static DICT="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";static REVERSE_DICT=new Map([["A",0],["B",1],["C",2],["D",3],["E",4],["F",5],["G",6],["H",7],["I",8],["J",9],["K",10],["L",11],["M",12],["N",13],["O",14],["P",15],["Q",16],["R",17],["S",18],["T",19],["U",20],["V",21],["W",22],["X",23],["Y",24],["Z",25],["a",26],["b",27],["c",28],["d",29],["e",30],["f",31],["g",32],["h",33],["i",34],["j",35],["k",36],["l",37],["m",38],["n",39],["o",40],["p",41],["q",42],["r",43],["s",44],["t",45],["u",46],["v",47],["w",48],["x",49],["y",50],["z",51],["0",52],["1",53],["2",54],["3",55],["4",56],["5",57],["6",58],["7",59],["8",60],["9",61],["-",62],["_",63]]);static BASIS=6;static LCM=24;static encode(e){if(!/^[0-1]+$/.test(e))throw new t("Invalid bitField");const s=e.length%this.LCM;e+=s?"0".repeat(this.LCM-s):"";let n="";for(let t=0;t<e.length;t+=this.BASIS)n+=this.DICT[parseInt(e.substr(t,this.BASIS),2)];return n}static decode(t){if(!/^[A-Za-z0-9\-_]+$/.test(t))throw new e("Invalidly encoded Base64URL string");let s="";for(let e=0;e<t.length;e++){const n=this.REVERSE_DICT.get(t[e]).toString(2);s+="0".repeat(this.BASIS-n.length)+n}return s}}class r{static langSet=new Set(["AR","BG","BS","CA","CS","CY","DA","DE","EL","EN","ES","ET","EU","FI","FR","GL","HE","HI","HR","HU","ID","IS","IT","JA","KA","KO","LT","LV","MK","MS","MT","NL","NO","PL","PT-BR","PT-PT","RO","RU","SK","SL","SQ","SR-LATN","SR-CYRL","SV","SW","TH","TL","TR","UK","VI","ZH","ZH-HANT"]);has(e){return r.langSet.has(e)}parseLanguage(e){const t=(e=e.toUpperCase()).split("-")[0];if(e.length>=2&&2==t.length){if(r.langSet.has(e))return e;if(r.langSet.has(t))return t;const s=t+"-"+t;if(r.langSet.has(s))return s;for(const s of r.langSet)if(-1!==s.indexOf(e)||-1!==s.indexOf(t))return s}throw new Error(`unsupported language ${e}`)}forEach(e){r.langSet.forEach(e)}get size(){return r.langSet.size}}class a{static cmpId="cmpId";static cmpVersion="cmpVersion";static consentLanguage="consentLanguage";static consentScreen="consentScreen";static created="created";static supportOOB="supportOOB";static isServiceSpecific="isServiceSpecific";static lastUpdated="lastUpdated";static numCustomPurposes="numCustomPurposes";static policyVersion="policyVersion";static publisherCountryCode="publisherCountryCode";static publisherCustomConsents="publisherCustomConsents";static publisherCustomLegitimateInterests="publisherCustomLegitimateInterests";static publisherLegitimateInterests="publisherLegitimateInterests";static publisherConsents="publisherConsents";static publisherRestrictions="publisherRestrictions";static purposeConsents="purposeConsents";static purposeLegitimateInterests="purposeLegitimateInterests";static purposeOneTreatment="purposeOneTreatment";static specialFeatureOptins="specialFeatureOptins";static useNonStandardTexts="useNonStandardTexts";static vendorConsents="vendorConsents";static vendorLegitimateInterests="vendorLegitimateInterests";static vendorListVersion="vendorListVersion";static vendorsAllowed="vendorsAllowed";static vendorsDisclosed="vendorsDisclosed";static version="version"}class c{clone(){const e=new this.constructor;return Object.keys(this).forEach((t=>{const s=this.deepClone(this[t]);void 0!==s&&(e[t]=s)})),e}deepClone(e){const t=typeof e;if("number"===t||"string"===t||"boolean"===t)return e;if(null!==e&&"object"===t){if("function"==typeof e.clone)return e.clone();if(e instanceof Date)return new Date(e.getTime());if(void 0!==e[Symbol.iterator]){const t=[];for(const s of e)t.push(this.deepClone(s));return e instanceof Array?t:new e.constructor(t)}{const t={};for(const s in e)e.hasOwnProperty(s)&&(t[s]=this.deepClone(e[s]));return t}}}}var l,d,p,u,h,g,f,w;!function(e){e[e.NOT_ALLOWED=0]="NOT_ALLOWED",e[e.REQUIRE_CONSENT=1]="REQUIRE_CONSENT",e[e.REQUIRE_LI=2]="REQUIRE_LI"}(l||(l={}));class v extends c{static hashSeparator="-";purposeId_;restrictionType;constructor(e,t){super(),void 0!==e&&(this.purposeId=e),void 0!==t&&(this.restrictionType=t)}static unHash(e){const t=e.split(this.hashSeparator),s=new v;if(2!==t.length)throw new o("hash",e);return s.purposeId=parseInt(t[0],10),s.restrictionType=parseInt(t[1],10),s}get hash(){if(!this.isValid())throw new Error("cannot hash invalid PurposeRestriction");return`${this.purposeId}${v.hashSeparator}${this.restrictionType}`}get purposeId(){return this.purposeId_}set purposeId(e){this.purposeId_=e}isValid(){return Number.isInteger(this.purposeId)&&this.purposeId>0&&(this.restrictionType===l.NOT_ALLOWED||this.restrictionType===l.REQUIRE_CONSENT||this.restrictionType===l.REQUIRE_LI)}isSameAs(e){return this.purposeId===e.purposeId&&this.restrictionType===e.restrictionType}}class m extends c{bitLength=0;map=new Map;gvl_;has(e){return this.map.has(e)}isOkToHave(e,t,s){let n=!0;if(this.gvl?.vendors){const o=this.gvl.vendors[s];if(o)if(e===l.NOT_ALLOWED)n=o.legIntPurposes.includes(t)||o.purposes.includes(t);else if(o.flexiblePurposes.length)switch(e){case l.REQUIRE_CONSENT:n=o.flexiblePurposes.includes(t)&&o.legIntPurposes.includes(t);break;case l.REQUIRE_LI:n=o.flexiblePurposes.includes(t)&&o.purposes.includes(t)}else n=!1;else n=!1}return n}add(e,t){if(this.isOkToHave(t.restrictionType,t.purposeId,e)){const s=t.hash;this.has(s)||(this.map.set(s,new Set),this.bitLength=0),this.map.get(s).add(e)}}restrictPurposeToLegalBasis(e){const t=Array.from(this.gvl.vendorIds),s=e.hash,n=t[t.length-1],o=[...Array(n).keys()].map((e=>e+1));if(this.has(s))for(let e=1;e<=n;e++)this.map.get(s).add(e);else this.map.set(s,new Set(o)),this.bitLength=0}getVendors(e){let t=[];if(e){const s=e.hash;this.has(s)&&(t=Array.from(this.map.get(s)))}else{const e=new Set;this.map.forEach((t=>{t.forEach((t=>{e.add(t)}))})),t=Array.from(e)}return t.sort(((e,t)=>e-t))}getRestrictionType(e,t){let s;return this.getRestrictions(e).forEach((e=>{e.purposeId===t&&(void 0===s||s>e.restrictionType)&&(s=e.restrictionType)})),s}vendorHasRestriction(e,t){let s=!1;const n=this.getRestrictions(e);for(let e=0;e<n.length&&!s;e++)s=t.isSameAs(n[e]);return s}getMaxVendorId(){let e=0;return this.map.forEach((t=>{e=Math.max(Array.from(t)[t.size-1],e)})),e}getRestrictions(e){const t=[];return this.map.forEach(((s,n)=>{e?s.has(e)&&t.push(v.unHash(n)):t.push(v.unHash(n))})),t}getPurposes(){const e=new Set;return this.map.forEach(((t,s)=>{e.add(v.unHash(s).purposeId)})),Array.from(e)}remove(e,t){const s=t.hash,n=this.map.get(s);n&&(n.delete(e),0==n.size&&(this.map.delete(s),this.bitLength=0))}set gvl(e){this.gvl_||(this.gvl_=e,this.map.forEach(((e,t)=>{const s=v.unHash(t);Array.from(e).forEach((t=>{this.isOkToHave(s.restrictionType,s.purposeId,t)||e.delete(t)}))})))}get gvl(){return this.gvl_}isEmpty(){return 0===this.map.size}get numRestrictions(){return this.map.size}}!function(e){e.COOKIE="cookie",e.WEB="web",e.APP="app"}(d||(d={})),function(e){e.CORE="core",e.VENDORS_DISCLOSED="vendorsDisclosed",e.VENDORS_ALLOWED="vendorsAllowed",e.PUBLISHER_TC="publisherTC"}(p||(p={}));class b{static ID_TO_KEY=[p.CORE,p.VENDORS_DISCLOSED,p.VENDORS_ALLOWED,p.PUBLISHER_TC];static KEY_TO_ID={[p.CORE]:0,[p.VENDORS_DISCLOSED]:1,[p.VENDORS_ALLOWED]:2,[p.PUBLISHER_TC]:3}}class C extends c{bitLength=0;maxId_=0;set_=new Set;*[Symbol.iterator](){for(let e=1;e<=this.maxId;e++)yield[e,this.has(e)]}values(){return this.set_.values()}get maxId(){return this.maxId_}has(e){return this.set_.has(e)}unset(e){Array.isArray(e)?e.forEach((e=>this.unset(e))):"object"==typeof e?this.unset(Object.keys(e).map((e=>Number(e)))):(this.set_.delete(Number(e)),this.bitLength=0,e===this.maxId&&(this.maxId_=0,this.set_.forEach((e=>{this.maxId_=Math.max(this.maxId,e)}))))}isIntMap(e){let t="object"==typeof e;return t=t&&Object.keys(e).every((t=>{let s=Number.isInteger(parseInt(t,10));return s=s&&this.isValidNumber(e[t].id),s=s&&void 0!==e[t].name,s})),t}isValidNumber(e){return parseInt(e,10)>0}isSet(e){let t=!1;return e instanceof Set&&(t=Array.from(e).every(this.isValidNumber)),t}set(e){if(Array.isArray(e))e.forEach((e=>this.set(e)));else if(this.isSet(e))this.set(Array.from(e));else if(this.isIntMap(e))this.set(Object.keys(e).map((e=>Number(e))));else{if(!this.isValidNumber(e))throw new o("set()",e,"must be positive integer array, positive integer, Set<number>, or IntMap");this.set_.add(e),this.maxId_=Math.max(this.maxId,e),this.bitLength=0}}empty(){this.set_=new Set,this.maxId_=0}forEach(e){for(let t=1;t<=this.maxId;t++)e(this.has(t),t)}get size(){return this.set_.size}setAll(e){this.set(e)}}class y{static[a.cmpId]=12;static[a.cmpVersion]=12;static[a.consentLanguage]=12;static[a.consentScreen]=6;static[a.created]=36;static[a.isServiceSpecific]=1;static[a.lastUpdated]=36;static[a.policyVersion]=6;static[a.publisherCountryCode]=12;static[a.publisherLegitimateInterests]=24;static[a.publisherConsents]=24;static[a.purposeConsents]=24;static[a.purposeLegitimateInterests]=24;static[a.purposeOneTreatment]=1;static[a.specialFeatureOptins]=12;static[a.useNonStandardTexts]=1;static[a.vendorListVersion]=12;static[a.version]=6;static anyBoolean=1;static encodingType=1;static maxId=16;static numCustomPurposes=6;static numEntries=12;static numRestrictions=12;static purposeId=6;static restrictionType=2;static segmentType=3;static singleOrRange=1;static vendorId=16}class S{static encode(e,s){let n;if("string"==typeof e&&(e=parseInt(e,10)),n=e.toString(2),n.length>s||e<0)throw new t(`${e} too large to encode into ${s}`);return n.length<s&&(n="0".repeat(s-n.length)+n),n}static decode(t,s){if(s!==t.length)throw new e("invalid bit length");return parseInt(t,2)}}class I{static encode(e,t){return S.encode(Math.round(e.getTime()/100),t)}static decode(t,s){if(s!==t.length)throw new e("invalid bit length");const n=new Date;return n.setTime(100*S.decode(t,s)),n}}class E{static encode(e){return String(Number(e))}static decode(e){return"1"===e}}class P{static encode(e,t){let s="";for(let n=1;n<=t;n++)s+=E.encode(e.has(n));return s}static decode(t,s){if(t.length!==s)throw new e("bitfield encoding length mismatch");const n=new C;for(let e=1;e<=s;e++)E.decode(t[e-1])&&n.set(e);return n.bitLength=t.length,n}}class _{static encode(e,s){const n=(e=e.toUpperCase()).charCodeAt(0)-65,o=e.charCodeAt(1)-65;if(n<0||n>25||o<0||o>25)throw new t(`invalid language code: ${e}`);if(s%2==1)throw new t(`numBits must be even, ${s} is not valid`);return s/=2,S.encode(n,s)+S.encode(o,s)}static decode(t,s){let n;if(s!==t.length||t.length%2)throw new e("invalid bit length for language");{const e=65,s=t.length/2,o=S.decode(t.slice(0,s),s)+e,i=S.decode(t.slice(s),s)+e;n=String.fromCharCode(o)+String.fromCharCode(i)}return n}}class L{static encode(e){let t=S.encode(e.numRestrictions,y.numRestrictions);if(!e.isEmpty()){const s=(t,s)=>{for(let n=t+1;n<=s;n++)if(e.gvl.vendorIds.has(n))return n;return t};e.getRestrictions().forEach((n=>{t+=S.encode(n.purposeId,y.purposeId),t+=S.encode(n.restrictionType,y.restrictionType);const o=e.getVendors(n),i=o.length;let r=0,a=0,c="";for(let e=0;e<i;e++){const t=o[e];if(0===a&&(r++,a=t),e===i-1||o[e+1]>s(t,o[i-1])){const e=!(t===a);c+=E.encode(e),c+=S.encode(a,y.vendorId),e&&(c+=S.encode(t,y.vendorId)),a=0}}t+=S.encode(r,y.numEntries),t+=c}))}return t}static decode(t){let s=0;const n=new m,o=S.decode(t.substr(s,y.numRestrictions),y.numRestrictions);s+=y.numRestrictions;for(let i=0;i<o;i++){const o=S.decode(t.substr(s,y.purposeId),y.purposeId);s+=y.purposeId;const i=S.decode(t.substr(s,y.restrictionType),y.restrictionType);s+=y.restrictionType;const r=new v(o,i),a=S.decode(t.substr(s,y.numEntries),y.numEntries);s+=y.numEntries;for(let o=0;o<a;o++){const o=E.decode(t.substr(s,y.anyBoolean));s+=y.anyBoolean;const i=S.decode(t.substr(s,y.vendorId),y.vendorId);if(s+=y.vendorId,o){const o=S.decode(t.substr(s,y.vendorId),y.vendorId);if(s+=y.vendorId,o<i)throw new e(`Invalid RangeEntry: endVendorId ${o} is less than ${i}`);for(let e=i;e<=o;e++)n.add(e,r)}else n.add(i,r)}}return n.bitLength=s,n}}!function(e){e[e.FIELD=0]="FIELD",e[e.RANGE=1]="RANGE"}(u||(u={}));class A{static encode(e){const t=[];let s,n=[],o=S.encode(e.maxId,y.maxId),i="";const r=y.maxId+y.encodingType,a=r+e.maxId,c=2*y.vendorId+y.singleOrRange+y.numEntries;let l=r+y.numEntries;return e.forEach(((o,r)=>{i+=E.encode(o),s=e.maxId>c&&l<a,s&&o&&(e.has(r+1)?0===n.length&&(n.push(r),l+=y.singleOrRange,l+=y.vendorId):(n.push(r),l+=y.vendorId,t.push(n),n=[]))})),s?(o+=String(u.RANGE),o+=this.buildRangeEncoding(t)):(o+=String(u.FIELD),o+=i),o}static decode(t,s){let n,o=0;const i=S.decode(t.substr(o,y.maxId),y.maxId);o+=y.maxId;const r=S.decode(t.charAt(o),y.encodingType);if(o+=y.encodingType,r===u.RANGE){if(n=new C,1===s){if("1"===t.substr(o,1))throw new e("Unable to decode default consent=1");o++}const i=S.decode(t.substr(o,y.numEntries),y.numEntries);o+=y.numEntries;for(let e=0;e<i;e++){const e=E.decode(t.charAt(o));o+=y.singleOrRange;const s=S.decode(t.substr(o,y.vendorId),y.vendorId);if(o+=y.vendorId,e){const e=S.decode(t.substr(o,y.vendorId),y.vendorId);o+=y.vendorId;for(let t=s;t<=e;t++)n.set(t)}else n.set(s)}}else{const e=t.substr(o,i);o+=i,n=P.decode(e,i)}return n.bitLength=o,n}static buildRangeEncoding(e){const t=e.length;let s=S.encode(t,y.numEntries);return e.forEach((e=>{const t=1===e.length;s+=E.encode(!t),s+=S.encode(e[0],y.vendorId),t||(s+=S.encode(e[1],y.vendorId))})),s}}function T(){return{[a.version]:S,[a.created]:I,[a.lastUpdated]:I,[a.cmpId]:S,[a.cmpVersion]:S,[a.consentScreen]:S,[a.consentLanguage]:_,[a.vendorListVersion]:S,[a.policyVersion]:S,[a.isServiceSpecific]:E,[a.useNonStandardTexts]:E,[a.specialFeatureOptins]:P,[a.purposeConsents]:P,[a.purposeLegitimateInterests]:P,[a.purposeOneTreatment]:E,[a.publisherCountryCode]:_,[a.vendorConsents]:A,[a.vendorLegitimateInterests]:A,[a.publisherRestrictions]:L,segmentType:S,[a.vendorsDisclosed]:A,[a.vendorsAllowed]:A,[a.publisherConsents]:P,[a.publisherLegitimateInterests]:P,[a.numCustomPurposes]:S,[a.publisherCustomConsents]:P,[a.publisherCustomLegitimateInterests]:P}}class V{1={[p.CORE]:[a.version,a.created,a.lastUpdated,a.cmpId,a.cmpVersion,a.consentScreen,a.consentLanguage,a.vendorListVersion,a.purposeConsents,a.vendorConsents]};2={[p.CORE]:[a.version,a.created,a.lastUpdated,a.cmpId,a.cmpVersion,a.consentScreen,a.consentLanguage,a.vendorListVersion,a.policyVersion,a.isServiceSpecific,a.useNonStandardTexts,a.specialFeatureOptins,a.purposeConsents,a.purposeLegitimateInterests,a.purposeOneTreatment,a.publisherCountryCode,a.vendorConsents,a.vendorLegitimateInterests,a.publisherRestrictions],[p.VENDORS_DISCLOSED]:[a.vendorsDisclosed],[p.PUBLISHER_TC]:[a.publisherConsents,a.publisherLegitimateInterests,a.numCustomPurposes,a.publisherCustomConsents,a.publisherCustomLegitimateInterests],[p.VENDORS_ALLOWED]:[a.vendorsAllowed]}}class D{1=[p.CORE];2=[p.CORE];constructor(e,t){if(2===e.version)if(e.isServiceSpecific)this[2].push(p.VENDORS_DISCLOSED),this[2].push(p.PUBLISHER_TC);else{const s=!(!t||!t.isForVendors);s&&!0!==e[a.supportOOB]||this[2].push(p.VENDORS_DISCLOSED),s&&(e[a.supportOOB]&&e[a.vendorsAllowed].size>0&&this[2].push(p.VENDORS_ALLOWED),this[2].push(p.PUBLISHER_TC))}}}class R{static fieldSequence=new V;static encode(e,s){let n;try{n=this.fieldSequence[String(e.version)][s]}catch(n){throw new t(`Unable to encode version: ${e.version}, segment: ${s}`)}let o="";s!==p.CORE&&(o=S.encode(b.KEY_TO_ID[s],y.segmentType));const r=T();return n.forEach((n=>{const i=e[n],c=r[n];let l=y[n];void 0===l&&this.isPublisherCustom(n)&&(l=Number(e[a.numCustomPurposes]));try{o+=c.encode(i,l)}catch(e){throw new t(`Error encoding ${s}->${n}: ${e.message}`)}})),i.encode(o)}static decode(t,s,n){const o=i.decode(t);let r=0;n===p.CORE&&(s.version=S.decode(o.substr(r,y[a.version]),y[a.version])),n!==p.CORE&&(r+=y.segmentType);const c=this.fieldSequence[String(s.version)][n],l=T();return c.forEach((t=>{const n=l[t];let i=y[t];if(void 0===i&&this.isPublisherCustom(t)&&(i=Number(s[a.numCustomPurposes])),0!==i){const a=o.substr(r,i);if(s[t]=n===A?n.decode(a,s.version):n.decode(a,i),Number.isInteger(i))r+=i;else{if(!Number.isInteger(s[t].bitLength))throw new e(t);r+=s[t].bitLength}}})),s}static isPublisherCustom(e){return 0===e.indexOf("publisherCustom")}}class k{static processor=[e=>e,(e,t)=>{e.publisherRestrictions.gvl=t,e.purposeLegitimateInterests.unset([1,3,4,5,6]);const s=new Map;return s.set("legIntPurposes",e.vendorLegitimateInterests),s.set("purposes",e.vendorConsents),s.forEach(((s,n)=>{s.forEach(((o,i)=>{if(o){const o=t.vendors[i];if(!o||o.deletedDate)s.unset(i);else if(0===o[n].length)if("legIntPurposes"===n&&0===o.purposes.length&&0===o.legIntPurposes.length&&o.specialPurposes.length>0)s.set(i);else if("legIntPurposes"===n&&o.purposes.length>0&&0===o.legIntPurposes.length&&o.specialPurposes.length>0)s.set(i);else if(e.isServiceSpecific)if(0===o.flexiblePurposes.length)s.unset(i);else{const t=e.publisherRestrictions.getRestrictions(i);let o=!1;for(let e=0,s=t.length;e<s&&!o;e++)o=t[e].restrictionType===l.REQUIRE_CONSENT&&"purposes"===n||t[e].restrictionType===l.REQUIRE_LI&&"legIntPurposes"===n;o||s.unset(i)}else s.unset(i)}}))})),e}];static process(e,s){const n=e.gvl;if(!n)throw new t("Unable to encode TCModel without a GVL");if(!n.isReady)throw new t("Unable to encode TCModel tcModel.gvl.readyPromise is not resolved");(e=e.clone()).consentLanguage=n.language.slice(0,2).toUpperCase(),s?.version>0&&s?.version<=this.processor.length?e.version=s.version:e.version=this.processor.length;const o=e.version-1;if(!this.processor[o])throw new t(`Invalid version: ${e.version}`);return this.processor[o](e,n)}}class M{static absCall(e,t,s,n){return new Promise(((o,i)=>{const r=new XMLHttpRequest;r.withCredentials=s,r.addEventListener("load",(()=>{if(r.readyState==XMLHttpRequest.DONE)if(r.status>=200&&r.status<300){let e=r.response;if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}o(e)}else i(new Error(`HTTP Status: ${r.status} response type: ${r.responseType}`))})),r.addEventListener("error",(()=>{i(new Error("error"))})),r.addEventListener("abort",(()=>{i(new Error("aborted"))})),null===t?r.open("GET",e,!0):r.open("POST",e,!0),r.responseType="json",r.timeout=n,r.ontimeout=()=>{i(new Error("Timeout "+n+"ms "+e))},r.send(t)}))}static post(e,t,s=!1,n=0){return this.absCall(e,JSON.stringify(t),s,n)}static fetch(e,t=!1,s=0){return this.absCall(e,null,t,s)}}class F extends c{static LANGUAGE_CACHE=new Map;static CACHE=new Map;static LATEST_CACHE_KEY=0;static DEFAULT_LANGUAGE="EN";static consentLanguages=new r;static baseUrl_;static set baseUrl(e){if(/^https?:\/\/vendorlist\.consensu\.org\//.test(e))throw new n("Invalid baseUrl!  You may not pull directly from vendorlist.consensu.org and must provide your own cache");e.length>0&&"/"!==e[e.length-1]&&(e+="/"),this.baseUrl_=e}static get baseUrl(){return this.baseUrl_}static latestFilename="vendor-list.json";static versionedFilename="archives/vendor-list-v[VERSION].json";static languageFilename="purposes-[LANG].json";readyPromise;gvlSpecificationVersion;vendorListVersion;tcfPolicyVersion;lastUpdated;purposes;specialPurposes;features;specialFeatures;isReady_=!1;vendors_;vendorIds;fullVendorList;byPurposeVendorMap;bySpecialPurposeVendorMap;byFeatureVendorMap;bySpecialFeatureVendorMap;stacks;dataCategories;lang_;cacheLang_;isLatest=!1;constructor(e,t){super();let s=F.baseUrl,o=t?.language;if(o)try{o=F.consentLanguages.parseLanguage(o)}catch(e){throw new n("Error during parsing the language: "+e.message)}if(this.lang_=o||F.DEFAULT_LANGUAGE,this.cacheLang_=o||F.DEFAULT_LANGUAGE,this.isVendorList(e))this.populate(e),this.readyPromise=Promise.resolve();else{if(!s)throw new n("must specify GVL.baseUrl before loading GVL json");if(e>0){const t=e;F.CACHE.has(t)?(this.populate(F.CACHE.get(t)),this.readyPromise=Promise.resolve()):(s+=F.versionedFilename.replace("[VERSION]",String(t)),this.readyPromise=this.fetchJson(s))}else F.CACHE.has(F.LATEST_CACHE_KEY)?(this.populate(F.CACHE.get(F.LATEST_CACHE_KEY)),this.readyPromise=Promise.resolve()):(this.isLatest=!0,this.readyPromise=this.fetchJson(s+F.latestFilename))}}static emptyLanguageCache(e){let t=!1;return null==e&&F.LANGUAGE_CACHE.size>0?(F.LANGUAGE_CACHE=new Map,t=!0):"string"==typeof e&&this.consentLanguages.has(e.toUpperCase())&&(F.LANGUAGE_CACHE.delete(e.toUpperCase()),t=!0),t}static emptyCache(e){let t=!1;return Number.isInteger(e)&&e>=0?(F.CACHE.delete(e),t=!0):void 0===e&&(F.CACHE=new Map,t=!0),t}cacheLanguage(){F.LANGUAGE_CACHE.has(this.cacheLang_)||F.LANGUAGE_CACHE.set(this.cacheLang_,{purposes:this.purposes,specialPurposes:this.specialPurposes,features:this.features,specialFeatures:this.specialFeatures,stacks:this.stacks,dataCategories:this.dataCategories})}async fetchJson(e){try{this.populate(await M.fetch(e))}catch(e){throw new n(e.message)}}getJson(){return{gvlSpecificationVersion:this.gvlSpecificationVersion,vendorListVersion:this.vendorListVersion,tcfPolicyVersion:this.tcfPolicyVersion,lastUpdated:this.lastUpdated,purposes:this.clonePurposes(),specialPurposes:this.cloneSpecialPurposes(),features:this.cloneFeatures(),specialFeatures:this.cloneSpecialFeatures(),stacks:this.cloneStacks(),...this.dataCategories?{dataCategories:this.cloneDataCategories()}:{},vendors:this.cloneVendors()}}cloneSpecialFeatures(){const e={};for(const t of Object.keys(this.specialFeatures))e[t]=F.cloneFeature(this.specialFeatures[t]);return e}cloneFeatures(){const e={};for(const t of Object.keys(this.features))e[t]=F.cloneFeature(this.features[t]);return e}cloneStacks(){const e={};for(const t of Object.keys(this.stacks))e[t]=F.cloneStack(this.stacks[t]);return e}cloneDataCategories(){const e={};for(const t of Object.keys(this.dataCategories))e[t]=F.cloneDataCategory(this.dataCategories[t]);return e}cloneSpecialPurposes(){const e={};for(const t of Object.keys(this.specialPurposes))e[t]=F.clonePurpose(this.specialPurposes[t]);return e}clonePurposes(){const e={};for(const t of Object.keys(this.purposes))e[t]=F.clonePurpose(this.purposes[t]);return e}static clonePurpose(e){return{id:e.id,name:e.name,description:e.description,...e.descriptionLegal?{descriptionLegal:e.descriptionLegal}:{},...e.illustrations?{illustrations:Array.from(e.illustrations)}:{}}}static cloneFeature(e){return{id:e.id,name:e.name,description:e.description,...e.descriptionLegal?{descriptionLegal:e.descriptionLegal}:{},...e.illustrations?{illustrations:Array.from(e.illustrations)}:{}}}static cloneDataCategory(e){return{id:e.id,name:e.name,description:e.description}}static cloneStack(e){return{id:e.id,name:e.name,description:e.description,purposes:Array.from(e.purposes),specialFeatures:Array.from(e.specialFeatures)}}static cloneDataRetention(e){return{..."number"==typeof e.stdRetention?{stdRetention:e.stdRetention}:{},purposes:{...e.purposes},specialPurposes:{...e.specialPurposes}}}static cloneVendorUrls(e){return e.map((e=>({langId:e.langId,privacy:e.privacy,...e.legIntClaim?{legIntClaim:e.legIntClaim}:{}})))}static cloneVendor(e){return{id:e.id,name:e.name,purposes:Array.from(e.purposes),legIntPurposes:Array.from(e.legIntPurposes),flexiblePurposes:Array.from(e.flexiblePurposes),specialPurposes:Array.from(e.specialPurposes),features:Array.from(e.features),specialFeatures:Array.from(e.specialFeatures),...e.overflow?{overflow:{httpGetLimit:e.overflow.httpGetLimit}}:{},..."number"==typeof e.cookieMaxAgeSeconds||null===e.cookieMaxAgeSeconds?{cookieMaxAgeSeconds:e.cookieMaxAgeSeconds}:{},...void 0!==e.usesCookies?{usesCookies:e.usesCookies}:{},...e.policyUrl?{policyUrl:e.policyUrl}:{},...void 0!==e.cookieRefresh?{cookieRefresh:e.cookieRefresh}:{},...void 0!==e.usesNonCookieAccess?{usesNonCookieAccess:e.usesNonCookieAccess}:{},...e.dataRetention?{dataRetention:this.cloneDataRetention(e.dataRetention)}:{},...e.urls?{urls:this.cloneVendorUrls(e.urls)}:{},...e.dataDeclaration?{dataDeclaration:Array.from(e.dataDeclaration)}:{},...e.deviceStorageDisclosureUrl?{deviceStorageDisclosureUrl:e.deviceStorageDisclosureUrl}:{},...e.deletedDate?{deletedDate:e.deletedDate}:{}}}cloneVendors(){const e={};for(const t of Object.keys(this.fullVendorList))e[t]=F.cloneVendor(this.fullVendorList[t]);return e}async changeLanguage(e){let t=e;try{t=F.consentLanguages.parseLanguage(e)}catch(e){throw new n("Error during parsing the language: "+e.message)}const s=e.toUpperCase();if((t.toLowerCase()!==F.DEFAULT_LANGUAGE.toLowerCase()||F.LANGUAGE_CACHE.has(s))&&t!==this.lang_)if(this.lang_=t,F.LANGUAGE_CACHE.has(s)){const e=F.LANGUAGE_CACHE.get(s);for(const t in e)e.hasOwnProperty(t)&&(this[t]=e[t])}else{const e=F.baseUrl+F.languageFilename.replace("[LANG]",this.lang_.toLowerCase());try{await this.fetchJson(e),this.cacheLang_=s,this.cacheLanguage()}catch(e){throw new n("unable to load language: "+e.message)}}}get language(){return this.lang_}isVendorList(e){return void 0!==e&&void 0!==e.vendors}populate(e){this.purposes=e.purposes,this.specialPurposes=e.specialPurposes,this.features=e.features,this.specialFeatures=e.specialFeatures,this.stacks=e.stacks,this.dataCategories=e.dataCategories,this.isVendorList(e)&&(this.gvlSpecificationVersion=e.gvlSpecificationVersion,this.tcfPolicyVersion=e.tcfPolicyVersion,this.vendorListVersion=e.vendorListVersion,this.lastUpdated=e.lastUpdated,"string"==typeof this.lastUpdated&&(this.lastUpdated=new Date(this.lastUpdated)),this.vendors_=e.vendors,this.fullVendorList=e.vendors,this.mapVendors(),this.isReady_=!0,this.isLatest&&F.CACHE.set(F.LATEST_CACHE_KEY,this.getJson()),F.CACHE.has(this.vendorListVersion)||F.CACHE.set(this.vendorListVersion,this.getJson())),this.cacheLanguage()}mapVendors(e){this.byPurposeVendorMap={},this.bySpecialPurposeVendorMap={},this.byFeatureVendorMap={},this.bySpecialFeatureVendorMap={},Object.keys(this.purposes).forEach((e=>{this.byPurposeVendorMap[e]={legInt:new Set,consent:new Set,flexible:new Set}})),Object.keys(this.specialPurposes).forEach((e=>{this.bySpecialPurposeVendorMap[e]=new Set})),Object.keys(this.features).forEach((e=>{this.byFeatureVendorMap[e]=new Set})),Object.keys(this.specialFeatures).forEach((e=>{this.bySpecialFeatureVendorMap[e]=new Set})),Array.isArray(e)||(e=Object.keys(this.fullVendorList).map((e=>+e))),this.vendorIds=new Set(e),this.vendors_=e.reduce(((e,t)=>{const s=this.vendors_[String(t)];return s&&void 0===s.deletedDate&&(s.purposes.forEach((e=>{this.byPurposeVendorMap[String(e)].consent.add(t)})),s.specialPurposes.forEach((e=>{this.bySpecialPurposeVendorMap[String(e)].add(t)})),s.legIntPurposes.forEach((e=>{this.byPurposeVendorMap[String(e)].legInt.add(t)})),s.flexiblePurposes&&s.flexiblePurposes.forEach((e=>{this.byPurposeVendorMap[String(e)].flexible.add(t)})),s.features.forEach((e=>{this.byFeatureVendorMap[String(e)].add(t)})),s.specialFeatures.forEach((e=>{this.bySpecialFeatureVendorMap[String(e)].add(t)})),e[t]=s),e}),{})}getFilteredVendors(e,t,s,n){const o=e.charAt(0).toUpperCase()+e.slice(1);let i;const r={};return i="purpose"===e&&s?this["by"+o+"VendorMap"][String(t)][s]:this["by"+(n?"Special":"")+o+"VendorMap"][String(t)],i.forEach((e=>{r[String(e)]=this.vendors[String(e)]})),r}getVendorsWithConsentPurpose(e){return this.getFilteredVendors("purpose",e,"consent")}getVendorsWithLegIntPurpose(e){return this.getFilteredVendors("purpose",e,"legInt")}getVendorsWithFlexiblePurpose(e){return this.getFilteredVendors("purpose",e,"flexible")}getVendorsWithSpecialPurpose(e){return this.getFilteredVendors("purpose",e,void 0,!0)}getVendorsWithFeature(e){return this.getFilteredVendors("feature",e)}getVendorsWithSpecialFeature(e){return this.getFilteredVendors("feature",e,void 0,!0)}get vendors(){return this.vendors_}narrowVendorsTo(e){this.mapVendors(e)}get isReady(){return this.isReady_}clone(){const e=new F(this.getJson());return this.lang_!==F.DEFAULT_LANGUAGE&&e.changeLanguage(this.lang_),e}static isInstanceOf(e){return"object"==typeof e&&"function"==typeof e.narrowVendorsTo}}class O extends c{static consentLanguages=F.consentLanguages;isServiceSpecific_=!1;supportOOB_=!0;useNonStandardTexts_=!1;purposeOneTreatment_=!1;publisherCountryCode_="AA";version_=2;consentScreen_=0;policyVersion_=5;consentLanguage_="EN";cmpId_=0;cmpVersion_=0;vendorListVersion_=0;numCustomPurposes_=0;gvl_;created;lastUpdated;specialFeatureOptins=new C;purposeConsents=new C;purposeLegitimateInterests=new C;publisherConsents=new C;publisherLegitimateInterests=new C;publisherCustomConsents=new C;publisherCustomLegitimateInterests=new C;customPurposes;vendorConsents=new C;vendorLegitimateInterests=new C;vendorsDisclosed=new C;vendorsAllowed=new C;publisherRestrictions=new m;constructor(e){super(),e&&(this.gvl=e),this.updated()}set gvl(e){F.isInstanceOf(e)||(e=new F(e)),this.gvl_=e,this.publisherRestrictions.gvl=e}get gvl(){return this.gvl_}set cmpId(e){if(e=Number(e),!(Number.isInteger(e)&&e>1))throw new o("cmpId",e);this.cmpId_=e}get cmpId(){return this.cmpId_}set cmpVersion(e){if(e=Number(e),!(Number.isInteger(e)&&e>-1))throw new o("cmpVersion",e);this.cmpVersion_=e}get cmpVersion(){return this.cmpVersion_}set consentScreen(e){if(e=Number(e),!(Number.isInteger(e)&&e>-1))throw new o("consentScreen",e);this.consentScreen_=e}get consentScreen(){return this.consentScreen_}set consentLanguage(e){this.consentLanguage_=e}get consentLanguage(){return this.consentLanguage_}set publisherCountryCode(e){if(!/^([A-z]){2}$/.test(e))throw new o("publisherCountryCode",e);this.publisherCountryCode_=e.toUpperCase()}get publisherCountryCode(){return this.publisherCountryCode_}set vendorListVersion(e){if((e=0|Number(e))<0)throw new o("vendorListVersion",e);this.vendorListVersion_=e}get vendorListVersion(){return this.gvl?this.gvl.vendorListVersion:this.vendorListVersion_}set policyVersion(e){if(this.policyVersion_=parseInt(e,10),this.policyVersion_<0)throw new o("policyVersion",e)}get policyVersion(){return this.gvl?this.gvl.tcfPolicyVersion:this.policyVersion_}set version(e){this.version_=parseInt(e,10)}get version(){return this.version_}set isServiceSpecific(e){this.isServiceSpecific_=e}get isServiceSpecific(){return this.isServiceSpecific_}set useNonStandardTexts(e){this.useNonStandardTexts_=e}get useNonStandardTexts(){return this.useNonStandardTexts_}set supportOOB(e){this.supportOOB_=e}get supportOOB(){return this.supportOOB_}set purposeOneTreatment(e){this.purposeOneTreatment_=e}get purposeOneTreatment(){return this.purposeOneTreatment_}setAllVendorConsents(){this.vendorConsents.set(this.gvl.vendors)}unsetAllVendorConsents(){this.vendorConsents.empty()}setAllVendorsDisclosed(){this.vendorsDisclosed.set(this.gvl.vendors)}unsetAllVendorsDisclosed(){this.vendorsDisclosed.empty()}setAllVendorsAllowed(){this.vendorsAllowed.set(this.gvl.vendors)}unsetAllVendorsAllowed(){this.vendorsAllowed.empty()}setAllVendorLegitimateInterests(){this.vendorLegitimateInterests.set(this.gvl.vendors)}unsetAllVendorLegitimateInterests(){this.vendorLegitimateInterests.empty()}setAllPurposeConsents(){this.purposeConsents.set(this.gvl.purposes)}unsetAllPurposeConsents(){this.purposeConsents.empty()}setAllPurposeLegitimateInterests(){this.purposeLegitimateInterests.set(this.gvl.purposes)}unsetAllPurposeLegitimateInterests(){this.purposeLegitimateInterests.empty()}setAllSpecialFeatureOptins(){this.specialFeatureOptins.set(this.gvl.specialFeatures)}unsetAllSpecialFeatureOptins(){this.specialFeatureOptins.empty()}setAll(){this.setAllVendorConsents(),this.setAllPurposeLegitimateInterests(),this.setAllSpecialFeatureOptins(),this.setAllPurposeConsents(),this.setAllVendorLegitimateInterests()}unsetAll(){this.unsetAllVendorConsents(),this.unsetAllPurposeLegitimateInterests(),this.unsetAllSpecialFeatureOptins(),this.unsetAllPurposeConsents(),this.unsetAllVendorLegitimateInterests()}get numCustomPurposes(){let e=this.numCustomPurposes_;if("object"==typeof this.customPurposes){const t=Object.keys(this.customPurposes).sort(((e,t)=>Number(e)-Number(t)));e=parseInt(t.pop(),10)}return e}set numCustomPurposes(e){if(this.numCustomPurposes_=parseInt(e,10),this.numCustomPurposes_<0)throw new o("numCustomPurposes",e)}updated(){const e=new Date,t=new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()));this.created=t,this.lastUpdated=t}}class x{static encode(e,t){let s,n="";return e=k.process(e,t),s=Array.isArray(t?.segments)?t.segments:new D(e,t)[""+e.version],s.forEach(((t,o)=>{let i="";o<s.length-1&&(i="."),n+=R.encode(e,t)+i})),n}static decode(e,t){const s=e.split("."),n=s.length;t||(t=new O);for(let e=0;e<n;e++){const n=s[e],o=i.decode(n.charAt(0)).substr(0,y.segmentType),r=b.ID_TO_KEY[S.decode(o,y.segmentType).toString()];R.decode(n,t,r)}return t}}new class{constructor(){this.vendors=[],this.filteredVendors=[],this.searchTimeout=null,this.selectedPurposes=new Set,this.selectedSpecialPurposes=new Set,this.selectedSpecialFeatures=new Set,this.isFilterDropdownOpen=!1,this.gvl=null,window.addEventListener("wpconsent_banner_initialized",(()=>{this.init()}))}init(){this.bindEvents(),this.loadVendors(),window.WPConsentIABTabs=this}bindEvents(){window.WPConsent&&window.WPConsent.shadowRoot?(window.WPConsent.shadowRoot.addEventListener("click",(e=>{e.target.classList.contains("wpconsent-tcf-tab-button")&&(e.preventDefault(),e.stopPropagation(),this.switchTab(e.target))})),window.WPConsent.shadowRoot.addEventListener("input",(e=>{if("wpconsent-vendor-search"===e.target.id){const t=e.target.value;clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout((()=>{this.searchVendors(t)}),300)}})),window.WPConsent.shadowRoot.addEventListener("click",(e=>{"wpconsent-vendor-filter-btn"===e.target.id||e.target.closest("#wpconsent-vendor-filter-btn")?(e.preventDefault(),e.stopPropagation(),this.toggleFilterDropdown()):"wpconsent-filter-clear"===e.target.id?(e.preventDefault(),e.stopPropagation(),this.clearAllFilters()):e.target.closest(".wpconsent-vendor-filter-dropdown")||e.target.closest("#wpconsent-vendor-filter-btn")||this.isFilterDropdownOpen&&this.closeFilterDropdown()})),window.WPConsent.shadowRoot.addEventListener("change",(e=>{if(e.target.classList.contains("wpconsent-filter-purpose-checkbox")){const t=e.target.value;e.target.checked?this.selectedPurposes.add(t):this.selectedPurposes.delete(t),this.applyFilters()}else if(e.target.classList.contains("wpconsent-filter-specialpurpose-checkbox")){const t=e.target.value;e.target.checked?this.selectedSpecialPurposes.add(t):this.selectedSpecialPurposes.delete(t),this.applyFilters()}else if(e.target.classList.contains("wpconsent-filter-specialfeature-checkbox")){const t=e.target.value;e.target.checked?this.selectedSpecialFeatures.add(t):this.selectedSpecialFeatures.delete(t),this.applyFilters()}}))):setTimeout((()=>this.bindEvents()),100)}switchTab(e){const t=e.dataset.tab;window.WPConsent.shadowRoot.querySelectorAll(".wpconsent-tcf-tab-button").forEach((e=>{e.classList.remove("wpconsent-tcf-tab-active")})),window.WPConsent.shadowRoot.querySelectorAll(".wpconsent-tcf-tab-content").forEach((e=>{e.classList.remove("wpconsent-tcf-tab-active")})),e.classList.add("wpconsent-tcf-tab-active");const s=window.WPConsent.shadowRoot.querySelector(`.wpconsent-tcf-tab-${t}`);s?s.classList.add("wpconsent-tcf-tab-active"):console.error("Tab content not found for:",t),"purposes"===t&&this.populateSpecialPurposes(),"features"===t&&(this.populateFeatures(),this.populateSpecialFeatures()),"vendors"===t&&this.populateFilterPurposes()}switchToVendorsWithSpecialFeature(e){this.selectedPurposes.clear(),this.selectedSpecialFeatures.clear(),this.selectedSpecialFeatures.add(String(e));const t=window.WPConsent.shadowRoot?.querySelector('[data-tab="vendors"]');t&&this.switchTab(t),setTimeout((()=>{this.applyFilters()}),100)}switchToVendorsWithPurpose(e){this.selectedPurposes.clear(),this.selectedSpecialPurposes.clear(),this.selectedSpecialFeatures.clear(),this.selectedPurposes.add(String(e));const t=window.WPConsent.shadowRoot?.querySelector('[data-tab="vendors"]');t&&this.switchTab(t),setTimeout((()=>{this.applyFilters()}),100)}switchToVendorsWithSpecialPurpose(e){this.selectedPurposes.clear(),this.selectedSpecialPurposes.clear(),this.selectedSpecialFeatures.clear(),this.selectedSpecialPurposes.add(String(e));const t=window.WPConsent.shadowRoot?.querySelector('[data-tab="vendors"]');t&&this.switchTab(t),setTimeout((()=>{this.applyFilters()}),100)}async loadVendors(){try{if(!window.wpconsent||!window.wpconsent.iab_tcf_baseurl)return console.warn("IAB TCF GVL configuration not found"),this.vendors=[],void(this.filteredVendors=[]);this.gvl||(F.baseUrl=window.wpconsent.iab_tcf_baseurl,this.gvl=new F),this.gvl.readyPromise.then((()=>{const e=window.wpconsent.iab_tcf_enabled_vendors||[];if(0===e.length)return console.warn("No enabled vendors found in configuration"),this.vendors=[],void(this.filteredVendors=[]);this.gvl.narrowVendorsTo(e),this.vendors=Object.keys(this.gvl.vendors).map((e=>{const t=this.gvl.vendors[e];return{id:parseInt(e),name:t.name,policyUrl:t.policyUrl,legIntClaimUrl:t.legIntClaimUrl,purposes:t.purposes,legIntPurposes:t.legIntPurposes,flexiblePurposes:t.flexiblePurposes,specialPurposes:t.specialPurposes,features:t.features,specialFeatures:t.specialFeatures,cookieMaxAgeSeconds:t.cookieMaxAgeSeconds,cookieRefresh:t.cookieRefresh,usesNonCookieAccess:t.usesNonCookieAccess,deviceStorageDisclosureUrl:t.deviceStorageDisclosureUrl,urls:t.urls}})).sort(((e,t)=>{const s=(e.name||"Unknown Vendor").toLowerCase(),n=(t.name||"Unknown Vendor").toLowerCase();return s.localeCompare(n)})),this.filteredVendors=[...this.vendors],this.populateVendors(),this.populateSpecialPurposes()}))}catch(e){console.error("Error loading vendors with GVL:",e),this.vendors=[],this.filteredVendors=[]}}populateSpecialPurposes(){const e=window.WPConsent.shadowRoot?.getElementById("wpconsent-tcf-special-purposes-list");if(!e)return;if("true"===e.dataset.populated)return;if(!this.gvl||!this.gvl.specialPurposes)return void(e.innerHTML='<p class="wpconsent-no-special-purposes">Special purposes data not available.</p>');const t=this.gvl.specialPurposes;if(0===Object.keys(t).length)return void(e.innerHTML='<p class="wpconsent-no-special-purposes">No special purposes available.</p>');let s='<div class="wpconsent-tcf-section-separator"></div>';s+='<div class="wpconsent-tcf-special-purposes-description">',s+='<h4 class="wpconsent-tcf-section-heading">'+this.escapeHtml(this.getTranslation("Special Purposes"))+"</h4>",s+='<p class="wpconsent-tab-description">',s+=this.escapeHtml(this.getTranslation("special_purposes_description")),s+="</p>",s+="</div>",s+='<div class="wpconsent-tcf-special-purposes-accordion">',Object.keys(t).map((e=>({id:e,...t[e]}))).sort(((e,t)=>parseInt(e.id)-parseInt(t.id))).forEach((e=>{const t=e.id,n=e.name||`Special Purpose ${t}`,o=e.description||e.descriptionLegal||"",i=e.illustrations||[];let r="";i.length>0&&(r='<div class="wpconsent-iab-illustrations">',r+=`<p class="wpconsent-iab-illustrations-label"><strong>${this.escapeHtml(this.getTranslation("Examples:"))}</strong></p>`,i.forEach((e=>{r+=`<p class="wpconsent-iab-illustration">${this.escapeHtml(e)}</p>`})),r+="</div>"),s+=`\n\t\t\t\t<div class="wpconsent-preferences-accordion-item wpconsent-special-purpose-item" data-purpose-id="${t}">\n\t\t\t\t\t<div class="wpconsent-preferences-accordion-header">\n\t\t\t\t\t\t<div class="wpconsent-cookie-category-text">\n\t\t\t\t\t\t\t<button class="wpconsent-preferences-accordion-toggle">\n\t\t\t\t\t\t\t\t<span class="wpconsent-preferences-accordion-arrow"></span>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<label>${this.escapeHtml(n)}</label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="wpconsent-preferences-accordion-content">\n\t\t\t\t\t\t<p tabindex="0">${this.escapeHtml(o)}</p>\n\t\t\t\t\t\t${r}\n\t\t\t\t\t\t<p class="wpconsent-special-purpose-vendor-link">\n\t\t\t\t\t\t\t<button type="button" class="wpconsent-view-vendors-link wpconsent-view-vendors-special-purpose" data-special-purpose-id="${t}">${this.escapeHtml(this.getTranslation("View vendors using this special purpose"))}</button>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`})),s+="</div>",e.innerHTML=s,e.dataset.populated="true",this.bindSpecialPurposeAccordion()}populateFeatures(){const e=window.WPConsent.shadowRoot?.getElementById("wpconsent-tcf-features-list");if(!e)return;if("true"===e.dataset.populated)return;if(!this.gvl||!this.gvl.features)return void(e.innerHTML='<p class="wpconsent-no-features">Features data not available.</p>');const t=this.gvl.features;if(0===Object.keys(t).length)return void(e.innerHTML='<p class="wpconsent-no-features">No features available.</p>');let s='<div class="wpconsent-tcf-features-description">';s+='<h4 class="wpconsent-tcf-section-heading">'+this.escapeHtml(this.getTranslation("Features"))+"</h4>",s+='<p class="wpconsent-tab-description">',s+=this.escapeHtml(this.getTranslation("features_description")),s+="</p>",s+="</div>",s+='<div class="wpconsent-tcf-features-accordion">',Object.keys(t).map((e=>({id:e,...t[e]}))).sort(((e,t)=>parseInt(e.id)-parseInt(t.id))).forEach((e=>{const t=e.id,n=e.name||`Feature ${t}`,o=e.description||e.descriptionLegal||"",i=e.illustrations||[];let r="";i.length>0&&(r='<div class="wpconsent-iab-illustrations">',r+=`<p class="wpconsent-iab-illustrations-label"><strong>${this.escapeHtml(this.getTranslation("Examples:"))}</strong></p>`,i.forEach((e=>{r+=`<p class="wpconsent-iab-illustration">${this.escapeHtml(e)}</p>`})),r+="</div>"),s+=`\n\t\t\t\t<div class="wpconsent-preferences-accordion-item wpconsent-feature-item" data-feature-id="${t}">\n\t\t\t\t\t<div class="wpconsent-preferences-accordion-header">\n\t\t\t\t\t\t<div class="wpconsent-cookie-category-text">\n\t\t\t\t\t\t\t<button class="wpconsent-preferences-accordion-toggle">\n\t\t\t\t\t\t\t\t<span class="wpconsent-preferences-accordion-arrow"></span>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<label>${this.escapeHtml(n)}</label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="wpconsent-preferences-accordion-content">\n\t\t\t\t\t\t<p tabindex="0">${this.escapeHtml(o)}</p>\n\t\t\t\t\t\t${r}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`})),s+="</div>",e.innerHTML=s,e.dataset.populated="true",this.bindFeatureAccordion()}populateSpecialFeatures(){const e=window.WPConsent.shadowRoot?.getElementById("wpconsent-tcf-special-features-list");if(!e)return;if("true"===e.dataset.populated)return;if(!this.gvl||!this.gvl.specialFeatures)return void(e.innerHTML='<p class="wpconsent-no-special-features">Special features data not available.</p>');const t=this.gvl.specialFeatures;if(0===Object.keys(t).length)return void(e.innerHTML='<p class="wpconsent-no-special-features">No special features available.</p>');let s='<div class="wpconsent-tcf-section-separator"></div>';s+='<div class="wpconsent-tcf-special-features-description">',s+='<h4 class="wpconsent-tcf-section-heading">'+this.escapeHtml(this.getTranslation("Special Features"))+"</h4>",s+='<p class="wpconsent-tab-description">',s+=this.escapeHtml(this.getTranslation("special_features_description")),s+="</p>",s+="</div>",s+='<div class="wpconsent-tcf-special-features-accordion">',Object.keys(t).map((e=>({id:e,...t[e]}))).sort(((e,t)=>parseInt(e.id)-parseInt(t.id))).forEach((e=>{const t=e.id,n=e.name||`Special Feature ${t}`,o=e.description||e.descriptionLegal||"",i=e.illustrations||[];let r="";i.length>0&&(r='<div class="wpconsent-iab-illustrations">',r+=`<p class="wpconsent-iab-illustrations-label"><strong>${this.escapeHtml(this.getTranslation("Examples:"))}</strong></p>`,i.forEach((e=>{r+=`<p class="wpconsent-iab-illustration">${this.escapeHtml(e)}</p>`})),r+="</div>"),s+=`\n\t\t\t\t<div class="wpconsent-preferences-accordion-item wpconsent-special-feature-item" data-feature-id="${t}">\n\t\t\t\t\t<div class="wpconsent-preferences-accordion-header">\n\t\t\t\t\t\t<div class="wpconsent-cookie-category-text">\n\t\t\t\t\t\t\t<button class="wpconsent-preferences-accordion-toggle">\n\t\t\t\t\t\t\t\t<span class="wpconsent-preferences-accordion-arrow"></span>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<label>${this.escapeHtml(n)}</label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="wpconsent-cookie-category-checkbox">\n\t\t\t\t\t\t\t<label class="wpconsent-preferences-checkbox-toggle">\n\t\t\t\t\t\t\t\t<input type="checkbox" id="tcf-special-feature-${t}" name="wpconsent_tcf_special_feature[]" value="${t}" class="wpconsent-special-feature-checkbox">\n\t\t\t\t\t\t\t\t<span class="wpconsent-preferences-checkbox-toggle-slider"></span>\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="wpconsent-preferences-accordion-content">\n\t\t\t\t\t\t<p tabindex="0">${this.escapeHtml(o)}</p>\n\t\t\t\t\t\t${r}\n\t\t\t\t\t\t<p class="wpconsent-special-feature-vendor-link">\n\t\t\t\t\t\t\t<button type="button" class="wpconsent-view-vendors-link" data-feature-id="${t}">View vendors using this special feature</button>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`})),s+="</div>",e.innerHTML=s,e.dataset.populated="true",this.bindSpecialFeatureAccordion()}bindSpecialPurposeAccordion(){window.WPConsent.shadowRoot?.querySelectorAll(".wpconsent-special-purpose-item .wpconsent-preferences-accordion-toggle").forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault(),e.closest(".wpconsent-preferences-accordion-item").classList.toggle("active")}))})),window.WPConsent.shadowRoot?.querySelectorAll(".wpconsent-view-vendors-special-purpose").forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault();const s=e.dataset.specialPurposeId;s&&this.switchToVendorsWithSpecialPurpose(s)}))})),window.WPConsent.shadowRoot?.querySelectorAll(".wpconsent-view-vendors-purpose").forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault();const s=e.dataset.purposeId;s&&this.switchToVendorsWithPurpose(s)}))}))}bindFeatureAccordion(){window.WPConsent.shadowRoot?.querySelectorAll(".wpconsent-feature-item .wpconsent-preferences-accordion-toggle").forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault(),e.closest(".wpconsent-preferences-accordion-item").classList.toggle("active")}))}))}bindSpecialFeatureAccordion(){window.WPConsent.shadowRoot?.querySelectorAll(".wpconsent-special-feature-item .wpconsent-preferences-accordion-toggle").forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault(),e.closest(".wpconsent-preferences-accordion-item").classList.toggle("active")}))})),window.WPConsent.shadowRoot?.querySelectorAll(".wpconsent-view-vendors-link").forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault();const s=e.dataset.featureId;s&&this.switchToVendorsWithSpecialFeature(s)}))}))}searchVendors(e){const t=window.WPConsent.shadowRoot?.querySelectorAll(".wpconsent-tcf-vendor-item");if(!t)return;e||(e="");const s=e.toLowerCase().trim();let n=0;t.forEach((e=>{const t=e.querySelector(".wpconsent-cookie-category-text label"),o=t?t.textContent.toLowerCase():"";!s||o.includes(s)?(e.style.display="",n++):e.style.display="none"}));const o=window.WPConsent.shadowRoot?.getElementById("wpconsent-tcf-vendors-list");if(o){let e=o.querySelector(".wpconsent-no-vendors");if(0===n){if(!e){const t=o.querySelector(".wpconsent-tcf-vendors-accordion");t&&(e=document.createElement("p"),e.className="wpconsent-no-vendors",o.insertBefore(e,t))}e&&(e.textContent=0===this.vendors.length?"No vendors available.":"No vendors found matching your search.",e.style.display="")}else e&&(e.style.display="none")}}populateVendors(){const e=window.WPConsent.shadowRoot?.getElementById("wpconsent-tcf-vendors-list");e&&(0===this.vendors.length&&this.loadVendors(),this.renderVendorsList())}renderVendorsList(){const e=window.WPConsent.shadowRoot?.getElementById("wpconsent-tcf-vendors-list");if(!e)return;if(0===this.vendors.length)return void(e.innerHTML='<p class="wpconsent-no-vendors">No vendors available.</p>');const t=this.isLegitimateInterestGloballyDisabled();let s='<div class="wpconsent-tcf-vendors-table">';s+='\n\t\t\t<div class="wpconsent-tcf-vendors-header">\n\t\t\t\t<div class="wpconsent-vendor-name-header">\n\t\t\t\t\t\x3c!-- Empty space for vendor names --\x3e\n\t\t\t\t</div>\n\t\t\t\t<div class="wpconsent-vendor-toggles-header">\n\t\t\t\t\t<div class="wpconsent-master-toggle-group">\n\t\t',t||(s+='\n\t\t\t\t\t\t<div class="wpconsent-master-toggle-column">\n\t\t\t\t\t\t\t<span class="wpconsent-master-toggle-label">Legitimate Interest</span>\n\t\t\t\t\t\t\t<label class="wpconsent-preferences-checkbox-toggle wpconsent-master-toggle">\n\t\t\t\t\t\t\t\t<input type="checkbox" id="tcf-master-legint-toggle" class="wpconsent-master-legint-toggle">\n\t\t\t\t\t\t\t\t<span class="wpconsent-preferences-checkbox-toggle-slider"></span>\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</div>\n\t\t\t'),s+='\n\t\t\t\t\t\t<div class="wpconsent-master-toggle-column">\n\t\t\t\t\t\t\t<span class="wpconsent-master-toggle-label">Consent</span>\n\t\t\t\t\t\t\t<label class="wpconsent-preferences-checkbox-toggle wpconsent-master-toggle">\n\t\t\t\t\t\t\t\t<input type="checkbox" id="tcf-master-consent-toggle" class="wpconsent-master-consent-toggle">\n\t\t\t\t\t\t\t\t<span class="wpconsent-preferences-checkbox-toggle-slider"></span>\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t',s+='<div class="wpconsent-tcf-vendors-accordion">',this.vendors.forEach(((e,n)=>{const o=e.id||n,i=e.name||"Unknown Vendor",r=e.legIntPurposes&&e.legIntPurposes.length>0,a=e.purposes&&e.purposes.length>0;let c='\n\t\t\t\t<div class="wpconsent-vendor-table-checkboxes">\n\t\t\t';t||(c+='\n\t\t\t\t\t<div class="wpconsent-vendor-checkbox-column wpconsent-legint-column">\n\t\t\t\t',r&&(c+=`\n\t\t\t\t\t\t<label class="wpconsent-preferences-checkbox-toggle">\n\t\t\t\t\t\t\t<input type="checkbox" id="tcf-vendor-legint-${o}" name="wpconsent_tcf_vendor_legint[]" value="${o}" class="wpconsent-vendor-legint-checkbox" checked>\n\t\t\t\t\t\t\t<span class="wpconsent-preferences-checkbox-toggle-slider"></span>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t`),c+="\n\t\t\t\t\t</div>\n\t\t\t\t"),c+='\n\t\t\t\t\t<div class="wpconsent-vendor-checkbox-column wpconsent-consent-column">\n\t\t\t',a&&(c+=`\n\t\t\t\t\t<label class="wpconsent-preferences-checkbox-toggle">\n\t\t\t\t\t\t<input type="checkbox" id="tcf-vendor-consent-${o}" name="wpconsent_tcf_vendor_consent[]" value="${o}" class="wpconsent-vendor-consent-checkbox">\n\t\t\t\t\t\t<span class="wpconsent-preferences-checkbox-toggle-slider"></span>\n\t\t\t\t\t</label>\n\t\t\t\t`),c+="\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t",s+=`\n\t\t\t\t<div class="wpconsent-preferences-accordion-item wpconsent-cookie-category wpconsent-tcf-vendor-item" data-vendor-id="${o}" data-purposes="${this.escapeHtml(JSON.stringify(e.purposes||[]))}" data-special-purposes="${this.escapeHtml(JSON.stringify(e.specialPurposes||[]))}" data-special-features="${this.escapeHtml(JSON.stringify(e.specialFeatures||[]))}" data-content-loaded="false">\n\t\t\t\t\t<div class="wpconsent-preferences-accordion-header wpconsent-vendor-table-row">\n\t\t\t\t\t\t<div class="wpconsent-cookie-category-text wpconsent-vendor-name-cell">\n\t\t\t\t\t\t\t<button class="wpconsent-preferences-accordion-toggle">\n\t\t\t\t\t\t\t\t<span class="wpconsent-preferences-accordion-arrow"></span>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<label>${this.escapeHtml(i)}</label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t${c}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="wpconsent-preferences-accordion-content">\n\t\t\t\t\t\t\x3c!-- Content will be loaded on demand --\x3e\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`})),s+="</div>",s+="</div>",e.innerHTML=s,this.bindVendorAccordion(),this.bindMasterToggles()}generateVendorContent(e){return'<div class="wpconsent-vendor-details"></div>'}bindVendorAccordion(){window.WPConsent.shadowRoot?.querySelectorAll(".wpconsent-tcf-vendor-item .wpconsent-preferences-accordion-toggle").forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault();const s=e.closest(".wpconsent-preferences-accordion-item"),n=s.querySelector(".wpconsent-preferences-accordion-content"),o=s.dataset.vendorId,i="true"===s.dataset.contentLoaded;if(!s.classList.contains("active")&&!i){const e=this.vendors.find((e=>e.id==o));if(e){const t=this.generateVendorContent(e);n.innerHTML=t,s.dataset.contentLoaded="true"}}s.classList.toggle("active"),this.fireVendorTabEvent(s,o)}))}))}bindMasterToggles(){const e=window.WPConsent.shadowRoot;if(!e)return;const t=e.querySelector(".wpconsent-master-consent-toggle");t&&t.addEventListener("change",(t=>{const s=t.target.checked;e.querySelectorAll(".wpconsent-vendor-consent-checkbox").forEach((e=>{e.checked=s,e.dispatchEvent(new Event("change",{bubbles:!0}))}))}));const s=e.querySelector(".wpconsent-master-legint-toggle");s&&s.addEventListener("change",(t=>{const s=t.target.checked;e.querySelectorAll(".wpconsent-vendor-legint-checkbox").forEach((e=>{e.checked=s,e.dispatchEvent(new Event("change",{bubbles:!0}))}))})),this.bindIndividualCheckboxUpdates()}bindIndividualCheckboxUpdates(){const e=window.WPConsent.shadowRoot;if(!e)return;const t=()=>{const t=e.querySelector(".wpconsent-master-consent-toggle"),s=e.querySelectorAll(".wpconsent-vendor-consent-checkbox");if(t&&s.length>0){const e=Array.from(s).filter((e=>e.checked)).length,n=s.length;0===e?(t.checked=!1,t.indeterminate=!1):e===n?(t.checked=!0,t.indeterminate=!1):(t.checked=!1,t.indeterminate=!0)}},s=()=>{const t=e.querySelector(".wpconsent-master-legint-toggle"),s=e.querySelectorAll(".wpconsent-vendor-legint-checkbox");if(t&&s.length>0){const e=Array.from(s).filter((e=>e.checked)).length,n=s.length;0===e?(t.checked=!1,t.indeterminate=!1):e===n?(t.checked=!0,t.indeterminate=!1):(t.checked=!1,t.indeterminate=!0)}};e.addEventListener("change",(e=>{e.target.classList.contains("wpconsent-vendor-consent-checkbox")?t():e.target.classList.contains("wpconsent-vendor-legint-checkbox")&&s()})),t(),s()}fireVendorTabEvent(e,t){if(!this.gvl||!this.gvl.vendors||!t)return;const s=this.gvl.vendors[t];if(!s)return void console.warn(`Vendor with ID ${t} not found in GVL`);const n=e.classList.contains("active")?"vendorDetailsOpened":"vendorDetailsClosed",o={vendor_id:t,name:s.name||"Unknown Vendor",purposes:s.purposes||[],legIntPurposes:s.legIntPurposes||[],flexiblePurposes:s.flexiblePurposes||[],specialPurposes:s.specialPurposes||[],features:s.features||[],specialFeatures:s.specialFeatures||[],policyUrl:s.policyUrl||"",legIntClaimUrl:s.legIntClaimUrl||"",cookieMaxAgeSeconds:s.cookieMaxAgeSeconds,cookieRefresh:s.cookieRefresh,usesNonCookieAccess:s.usesNonCookieAccess||!1,deviceStorageDisclosureUrl:s.deviceStorageDisclosureUrl||"",urls:s.urls||[],dataRetention:s.dataRetention||null,dataDeclaration:s.dataDeclaration||[]};try{const s=new CustomEvent(n,{detail:{vendorId:t,vendorData:o,accordion:e,content:e.querySelector(".wpconsent-preferences-accordion-content"),source:"vendorsTab"}});document.dispatchEvent(s)}catch(e){console.error("Error firing vendor tab event:",e)}}toggleFilterDropdown(){const e=window.WPConsent.shadowRoot?.getElementById("wpconsent-vendor-filter-dropdown"),t=window.WPConsent.shadowRoot?.getElementById("wpconsent-vendor-filter-btn");e&&t&&(this.isFilterDropdownOpen?this.closeFilterDropdown():(e.style.display="block",t.classList.add("active"),this.isFilterDropdownOpen=!0))}closeFilterDropdown(){const e=window.WPConsent.shadowRoot?.getElementById("wpconsent-vendor-filter-dropdown"),t=window.WPConsent.shadowRoot?.getElementById("wpconsent-vendor-filter-btn");e&&(e.style.display="none"),t&&t.classList.remove("active"),this.isFilterDropdownOpen=!1}clearAllFilters(){this.selectedPurposes.clear(),this.selectedSpecialPurposes.clear(),this.selectedSpecialFeatures.clear();const e=window.WPConsent.shadowRoot?.querySelectorAll(".wpconsent-filter-purpose-checkbox");e&&e.forEach((e=>{e.checked=!1}));const t=window.WPConsent.shadowRoot?.querySelectorAll(".wpconsent-filter-specialpurpose-checkbox");t&&t.forEach((e=>{e.checked=!1}));const s=window.WPConsent.shadowRoot?.querySelectorAll(".wpconsent-filter-specialfeature-checkbox");s&&s.forEach((e=>{e.checked=!1})),this.applyFilters()}applyFilters(){const e=window.WPConsent.shadowRoot?.querySelectorAll(".wpconsent-tcf-vendor-item");if(!e)return;let t=0;e.forEach((e=>{let s=!0;if(this.selectedPurposes.size>0){const t=e.dataset.purposes;let n=[];if(t)try{n=JSON.parse(t)}catch(e){console.error("Error parsing vendor purposes:",e),n=[]}n.some((e=>this.selectedPurposes.has(String(e))))||(s=!1)}if(this.selectedSpecialPurposes.size>0&&s){const t=e.dataset.specialPurposes;let n=[];if(t)try{n=JSON.parse(t)}catch(e){console.error("Error parsing vendor special purposes:",e),n=[]}n.some((e=>this.selectedSpecialPurposes.has(String(e))))||(s=!1)}if(this.selectedSpecialFeatures.size>0&&s){const t=e.dataset.specialFeatures;let n=[];if(t)try{n=JSON.parse(t)}catch(e){console.error("Error parsing vendor special features:",e),n=[]}n.some((e=>this.selectedSpecialFeatures.has(String(e))))||(s=!1)}const n=window.WPConsent.shadowRoot?.getElementById("wpconsent-vendor-search");if(n&&n.value.trim()&&s){const t=n.value.toLowerCase().trim(),o=e.querySelector(".wpconsent-cookie-category-text label");(o?o.textContent.toLowerCase():"").includes(t)||(s=!1)}s?(e.style.display="",t++):e.style.display="none"})),this.updateNoVendorsMessage(t),this.updateActiveFiltersDisplay()}updateNoVendorsMessage(e){const t=window.WPConsent.shadowRoot?.getElementById("wpconsent-tcf-vendors-list");if(!t)return;let s=t.querySelector(".wpconsent-no-vendors");if(0===e){if(!s){const e=t.querySelector(".wpconsent-tcf-vendors-accordion");e&&(s=document.createElement("p"),s.className="wpconsent-no-vendors",t.insertBefore(s,e))}if(s){const e=window.WPConsent.shadowRoot?.getElementById("wpconsent-vendor-search")?.value.trim(),t=this.selectedPurposes.size>0||this.selectedSpecialPurposes.size>0||this.selectedSpecialFeatures.size>0;let n;n=0===this.vendors.length?"No vendors available.":e&&t?"No vendors found matching your search and filter criteria.":e?"No vendors found matching your search.":t?"No vendors found matching your filter criteria.":"No vendors available.",s.textContent=n,s.style.display=""}}else s&&(s.style.display="none")}updateActiveFiltersDisplay(){const e=window.WPConsent.shadowRoot?.getElementById("wpconsent-active-filters");if(!e)return;if(!(this.selectedPurposes.size>0||this.selectedSpecialPurposes.size>0||this.selectedSpecialFeatures.size>0))return e.innerHTML="",void(e.style.display="none");let t='<div class="wpconsent-active-filters-list">';t+=`<span class="wpconsent-active-filters-label">${this.escapeHtml(this.getTranslation("Active filters:"))}</span>`,this.gvl&&this.gvl.purposes&&this.selectedPurposes.forEach((e=>{const s=this.gvl.purposes[e];if(s){const n=this.escapeHtml(s.name||`Purpose ${e}`);t+=`<span class="wpconsent-filter-chip wpconsent-purpose-chip" data-purpose-id="${e}">\n\t\t\t\t\t\t${n}\n\t\t\t\t\t\t<button type="button" class="wpconsent-filter-chip-remove" data-filter-type="purpose" data-filter-id="${e}" aria-label="Remove filter"></button>\n\t\t\t\t\t</span>`}})),this.gvl&&this.gvl.specialPurposes&&this.selectedSpecialPurposes.forEach((e=>{const s=this.gvl.specialPurposes[e];if(s){const n=this.escapeHtml(s.name||`Special Purpose ${e}`);t+=`<span class="wpconsent-filter-chip wpconsent-specialpurpose-chip" data-purpose-id="${e}">\n\t\t\t\t\t\t${n}\n\t\t\t\t\t\t<button type="button" class="wpconsent-filter-chip-remove" data-filter-type="specialpurpose" data-filter-id="${e}" aria-label="Remove filter"></button>\n\t\t\t\t\t</span>`}})),this.gvl&&this.gvl.specialFeatures&&this.selectedSpecialFeatures.forEach((e=>{const s=this.gvl.specialFeatures[e];if(s){const n=this.escapeHtml(s.name||`Special Feature ${e}`);t+=`<span class="wpconsent-filter-chip wpconsent-specialfeature-chip" data-feature-id="${e}">\n\t\t\t\t\t\t${n}\n\t\t\t\t\t\t<button type="button" class="wpconsent-filter-chip-remove" data-filter-type="specialfeature" data-filter-id="${e}" aria-label="Remove filter"></button>\n\t\t\t\t\t</span>`}})),t+="</div>",e.innerHTML=t,e.style.display="block",this.bindActiveFilterRemoveHandlers()}bindActiveFilterRemoveHandlers(){const e=window.WPConsent.shadowRoot?.querySelectorAll(".wpconsent-filter-chip-remove");e&&e.forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault(),t.stopPropagation();const s=e.dataset.filterType,n=e.dataset.filterId;if("purpose"===s){this.selectedPurposes.delete(n);const e=window.WPConsent.shadowRoot?.querySelector(`.wpconsent-filter-purpose-checkbox[value="${n}"]`);e&&(e.checked=!1)}else if("specialpurpose"===s){this.selectedSpecialPurposes.delete(n);const e=window.WPConsent.shadowRoot?.querySelector(`.wpconsent-filter-specialpurpose-checkbox[value="${n}"]`);e&&(e.checked=!1)}else if("specialfeature"===s){this.selectedSpecialFeatures.delete(n);const e=window.WPConsent.shadowRoot?.querySelector(`.wpconsent-filter-specialfeature-checkbox[value="${n}"]`);e&&(e.checked=!1)}this.applyFilters()}))}))}populateFilterPurposes(){const e=window.WPConsent.shadowRoot?.getElementById("wpconsent-filter-purposes");if(!e)return;if(!this.gvl||!this.gvl.purposes)return void console.warn("GVL purposes data not available");const t=this.gvl.purposes,s=this.gvl.specialFeatures||{};let n="";const o={};this.vendors&&this.vendors.length>0&&this.vendors.forEach((e=>{e.purposes&&Array.isArray(e.purposes)&&e.purposes.forEach((e=>{o[e]||(o[e]={consent:0,legInt:0}),o[e].consent++})),e.legIntPurposes&&Array.isArray(e.legIntPurposes)&&e.legIntPurposes.forEach((e=>{o[e]||(o[e]={consent:0,legInt:0}),o[e].legInt++}))})),n+='<div class="wpconsent-filter-section wpconsent-filter-purposes-section">',n+='<h5 class="wpconsent-filter-section-title" style="font-weight: bold; color: #333; margin: 12px 0 8px 0; padding: 8px 0 4px 0; font-size: 13px; border-bottom: 1px solid #ddd;">Purposes</h5>',Object.keys(t).map((e=>({id:e,...t[e]}))).sort(((e,t)=>parseInt(e.id)-parseInt(t.id))).forEach((e=>{const t=e.id,s=e.name||`Purpose ${t}`,i=this.selectedPurposes.has(String(t));let r="";if(o[t]){const e=o[t],s=[];e.consent>0&&s.push(`${e.consent} seeking consent`),e.legInt>0&&s.push(`${e.legInt} using legitimate interest`),s.length>0&&(r=` (${s.join(", ")})`)}n+=`\n\t\t\t\t<div class="wpconsent-filter-purpose-item">\n\t\t\t\t\t<input type="checkbox"\n\t\t\t\t\t\t   class="wpconsent-filter-purpose-checkbox"\n\t\t\t\t\t\t   id="purpose-filter-${t}"\n\t\t\t\t\t\t   value="${t}"\n\t\t\t\t\t\t   ${i?"checked":""}>\n\t\t\t\t\t<label class="wpconsent-filter-purpose-label" for="purpose-filter-${t}">\n\t\t\t\t\t\t${this.escapeHtml(s)}${this.escapeHtml(r)}\n\t\t\t\t\t</label>\n\t\t\t\t</div>\n\t\t\t`})),n+="</div>";const i={},r=this.gvl.specialPurposes||{};this.vendors&&this.vendors.length>0&&this.vendors.forEach((e=>{e.specialPurposes&&Array.isArray(e.specialPurposes)&&e.specialPurposes.forEach((e=>{i[e]||(i[e]=0),i[e]++}))})),Object.keys(r).length>0&&(n+='<div class="wpconsent-filter-section wpconsent-filter-specialpurposes-section">',n+='<h5 class="wpconsent-filter-section-title" style="font-weight: bold; color: #333; margin: 12px 0 8px 0; padding: 8px 0 4px 0; font-size: 13px; border-bottom: 1px solid #ddd;">Special Purposes</h5>',Object.keys(r).map((e=>({id:e,...r[e]}))).sort(((e,t)=>parseInt(e.id)-parseInt(t.id))).forEach((e=>{const t=e.id,s=e.name||`Special Purpose ${t}`,o=this.selectedSpecialPurposes.has(String(t));let r="";i[t]&&(r=` (${i[t]} vendor${1!==i[t]?"s":""})`),n+=`\n\t\t\t\t\t<div class="wpconsent-filter-purpose-item wpconsent-filter-specialpurpose-item">\n\t\t\t\t\t\t<input type="checkbox"\n\t\t\t\t\t\t\t   class="wpconsent-filter-specialpurpose-checkbox"\n\t\t\t\t\t\t\t   id="specialpurpose-filter-${t}"\n\t\t\t\t\t\t\t   value="${t}"\n\t\t\t\t\t\t\t   ${o?"checked":""}>\n\t\t\t\t\t\t<label class="wpconsent-filter-purpose-label wpconsent-filter-specialpurpose-label" for="specialpurpose-filter-${t}">\n\t\t\t\t\t\t\t${this.escapeHtml(s)}${this.escapeHtml(r)}\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</div>\n\t\t\t\t`})),n+="</div>");const a={};this.vendors&&this.vendors.length>0&&this.vendors.forEach((e=>{e.specialFeatures&&Array.isArray(e.specialFeatures)&&e.specialFeatures.forEach((e=>{a[e]||(a[e]=0),a[e]++}))})),Object.keys(s).length>0&&(n+='<div class="wpconsent-filter-section wpconsent-filter-specialfeatures-section">',n+='<h5 class="wpconsent-filter-section-title" style="font-weight: bold; color: #333; margin: 12px 0 8px 0; padding: 8px 0 4px 0; font-size: 13px; border-bottom: 1px solid #ddd;">Special Features</h5>',Object.keys(s).map((e=>({id:e,...s[e]}))).sort(((e,t)=>parseInt(e.id)-parseInt(t.id))).forEach((e=>{const t=e.id,s=e.name||`Special Feature ${t}`,o=this.selectedSpecialFeatures.has(String(t));let i="";a[t]&&(i=` (${a[t]} vendor${1!==a[t]?"s":""})`),n+=`\n\t\t\t\t\t<div class="wpconsent-filter-purpose-item wpconsent-filter-specialfeature-item">\n\t\t\t\t\t\t<input type="checkbox"\n\t\t\t\t\t\t\t   class="wpconsent-filter-specialfeature-checkbox"\n\t\t\t\t\t\t\t   id="specialfeature-filter-${t}"\n\t\t\t\t\t\t\t   value="${t}"\n\t\t\t\t\t\t\t   ${o?"checked":""}>\n\t\t\t\t\t\t<label class="wpconsent-filter-purpose-label wpconsent-filter-specialfeature-label" for="specialfeature-filter-${t}">\n\t\t\t\t\t\t\t${this.escapeHtml(s)}${this.escapeHtml(i)}\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</div>\n\t\t\t\t`})),n+="</div>"),e.innerHTML=n}searchVendors(e){this.applyFilters()}getTranslation(e){if(window.wpconsent&&window.wpconsent.iab_tcf_translations){const t=window.wpconsent.iab_tcf_translations;if(t[e])return t[e]}return{"Special Purposes":"Special Purposes",special_purposes_description:"Special purposes are processing activities that do not require your consent. They are essential for the functioning of the service, such as security, fraud prevention, and technical delivery.","View vendors using this special purpose":"View vendors using this special purpose",Features:"Features",features_description:"Features are technical capabilities that vendors use to support their data processing purposes. These features do not require separate consent.","Special Features":"Special Features",special_features_description:"Special features are data processing practices that require your explicit consent. You can object to their use by the vendors listed here.","Active filters:":"Active filters:","Examples:":"Examples:"}[e]||e}isLegitimateInterestGloballyDisabled(){if(!window.wpconsent||!window.wpconsent.iab_tcf_publisher_restrictions)return!1;const e=window.wpconsent.iab_tcf_publisher_restrictions;return!!(e.global&&e.global.disallow_li_purposes&&Array.isArray(e.global.disallow_li_purposes)&&e.global.disallow_li_purposes.includes("all"))}escapeHtml(e){const t=document.createElement("div");return t.textContent=e,t.innerHTML}},function(e){e.PING="ping",e.GET_TC_DATA="getTCData",e.GET_IN_APP_TC_DATA="getInAppTCData",e.GET_VENDOR_LIST="getVendorList",e.ADD_EVENT_LISTENER="addEventListener",e.REMOVE_EVENT_LISTENER="removeEventListener"}(h||(h={})),function(e){e.STUB="stub",e.LOADING="loading",e.LOADED="loaded",e.ERROR="error"}(g||(g={})),function(e){e.VISIBLE="visible",e.HIDDEN="hidden",e.DISABLED="disabled"}(f||(f={})),function(e){e.TC_LOADED="tcloaded",e.CMP_UI_SHOWN="cmpuishown",e.USER_ACTION_COMPLETE="useractioncomplete"}(w||(w={}));class N{listenerId;callback;next;param;success=!0;constructor(e,t,s,n){Object.assign(this,{callback:e,listenerId:s,param:t,next:n});try{this.respond()}catch(e){this.invokeCallback(null)}}invokeCallback(e){const t=null!==e;"function"==typeof this.next?this.callback(this.next,e,t):this.callback(e,t)}}class U extends N{respond(){this.throwIfParamInvalid(),this.invokeCallback(new q(this.param,this.listenerId))}throwIfParamInvalid(){if(!(void 0===this.param||Array.isArray(this.param)&&this.param.every(Number.isInteger)))throw new Error("Invalid Parameter")}}class ${eventQueue=new Map;queueNumber=0;add(e){return this.eventQueue.set(this.queueNumber,e),this.queueNumber++}remove(e){return this.eventQueue.delete(e)}exec(){this.eventQueue.forEach(((e,t)=>{new U(e.callback,e.param,t,e.next)}))}clear(){this.queueNumber=0,this.eventQueue.clear()}get size(){return this.eventQueue.size}}class H{static apiVersion="2";static tcfPolicyVersion;static eventQueue=new $;static cmpStatus=g.LOADING;static disabled=!1;static displayStatus=f.HIDDEN;static cmpId;static cmpVersion;static eventStatus;static gdprApplies;static tcModel;static tcString;static reset(){delete this.cmpId,delete this.cmpVersion,delete this.eventStatus,delete this.gdprApplies,delete this.tcModel,delete this.tcString,delete this.tcfPolicyVersion,this.cmpStatus=g.LOADING,this.disabled=!1,this.displayStatus=f.HIDDEN,this.eventQueue.clear()}}class W{cmpId=H.cmpId;cmpVersion=H.cmpVersion;gdprApplies=H.gdprApplies;tcfPolicyVersion=H.tcfPolicyVersion}class B extends W{cmpStatus=g.ERROR}class q extends W{tcString;listenerId;eventStatus;cmpStatus;isServiceSpecific;useNonStandardTexts;publisherCC;purposeOneTreatment;outOfBand;purpose;vendor;specialFeatureOptins;publisher;constructor(e,t){if(super(),this.eventStatus=H.eventStatus,this.cmpStatus=H.cmpStatus,this.listenerId=t,H.gdprApplies){const t=H.tcModel;this.tcString=H.tcString,this.isServiceSpecific=t.isServiceSpecific,this.useNonStandardTexts=t.useNonStandardTexts,this.purposeOneTreatment=t.purposeOneTreatment,this.publisherCC=t.publisherCountryCode,this.outOfBand={allowedVendors:this.createVectorField(t.vendorsAllowed,e),disclosedVendors:this.createVectorField(t.vendorsDisclosed,e)},this.purpose={consents:this.createVectorField(t.purposeConsents),legitimateInterests:this.createVectorField(t.purposeLegitimateInterests)},this.vendor={consents:this.createVectorField(t.vendorConsents,e),legitimateInterests:this.createVectorField(t.vendorLegitimateInterests,e),disclosedVendors:this.createVectorField(t.vendorsDisclosed,e)},this.specialFeatureOptins=this.createVectorField(t.specialFeatureOptins),this.publisher={consents:this.createVectorField(t.publisherConsents),legitimateInterests:this.createVectorField(t.publisherLegitimateInterests),customPurpose:{consents:this.createVectorField(t.publisherCustomConsents),legitimateInterests:this.createVectorField(t.publisherCustomLegitimateInterests)},restrictions:this.createRestrictions(t.publisherRestrictions)}}}createRestrictions(e){const t={};if(e.numRestrictions>0){const s=e.getMaxVendorId();for(let n=1;n<=s;n++){const s=n.toString();e.getRestrictions(n).forEach((e=>{const n=e.purposeId.toString();t[n]||(t[n]={}),t[n][s]=e.restrictionType}))}}return t}createVectorField(e,t){return t?t.reduce(((t,s)=>(t[String(s)]=e.has(Number(s)),t)),{}):[...e].reduce(((e,t)=>(e[t[0].toString(10)]=t[1],e)),{})}}class G extends q{constructor(e){super(e),delete this.outOfBand}createVectorField(e){return[...e].reduce(((e,t)=>e+(t[1]?"1":"0")),"")}createRestrictions(e){const t={};if(e.numRestrictions>0){const s=e.getMaxVendorId();e.getRestrictions().forEach((e=>{t[e.purposeId.toString()]="_".repeat(s)}));for(let n=0;n<s;n++){const s=n+1;e.getRestrictions(s).forEach((e=>{const s=e.restrictionType.toString(),o=e.purposeId.toString(),i=t[o].substr(0,n),r=t[o].substr(n+1);t[o]=i+s+r}))}}return t}}class j extends W{cmpLoaded=!0;cmpStatus=H.cmpStatus;displayStatus=H.displayStatus;apiVersion=String(H.apiVersion);gvlVersion;constructor(){super(),H.tcModel&&H.tcModel.vendorListVersion&&(this.gvlVersion=+H.tcModel.vendorListVersion)}}class z extends N{respond(){this.invokeCallback(new j)}}class Q extends U{respond(){this.throwIfParamInvalid(),this.invokeCallback(new G(this.param))}}class J extends N{respond(){const e=H.tcModel,t=e.vendorListVersion;let s;void 0===this.param&&(this.param=t),s=this.param===t&&e.gvl?e.gvl:new F(this.param),s.readyPromise.then((()=>{this.invokeCallback(s.getJson())}))}}class K extends U{respond(){this.listenerId=H.eventQueue.add({callback:this.callback,param:this.param,next:this.next}),super.respond()}}class Y extends N{respond(){this.invokeCallback(H.eventQueue.remove(this.param))}}class Z{static[h.PING]=z;static[h.GET_TC_DATA]=U;static[h.GET_IN_APP_TC_DATA]=Q;static[h.GET_VENDOR_LIST]=J;static[h.ADD_EVENT_LISTENER]=K;static[h.REMOVE_EVENT_LISTENER]=Y}class X{static set_=new Set([0,2,void 0,null]);static has(e){return"string"==typeof e&&(e=Number(e)),this.set_.has(e)}}const ee="__tcfapi";class te{callQueue;customCommands;constructor(e){if(e){let t=h.ADD_EVENT_LISTENER;if(e?.[t])throw new Error(`Built-In Custom Commmand for ${t} not allowed: Use ${h.GET_TC_DATA} instead`);if(t=h.REMOVE_EVENT_LISTENER,e?.[t])throw new Error(`Built-In Custom Commmand for ${t} not allowed`);e?.[h.GET_TC_DATA]&&(e[h.ADD_EVENT_LISTENER]=e[h.GET_TC_DATA],e[h.REMOVE_EVENT_LISTENER]=e[h.GET_TC_DATA]),this.customCommands=e}try{this.callQueue=window[ee]()||[]}catch(e){this.callQueue=[]}finally{window[ee]=this.apiCall.bind(this),this.purgeQueuedCalls()}}apiCall(e,t,s,...n){if("string"!=typeof e&&"function"==typeof s)s(null,!1);else if(X.has(t)){if("function"!=typeof s)throw new Error("invalid callback function");H.disabled?s(new B,!1):this.isCustomCommand(e)||this.isBuiltInCommand(e)?this.isCustomCommand(e)&&!this.isBuiltInCommand(e)?this.customCommands[e](s,...n):e===h.PING?this.isCustomCommand(e)?new Z[e](this.customCommands[e],n[0],null,s):new Z[e](s,n[0]):void 0===H.tcModel?this.callQueue.push([e,t,s,...n]):this.isCustomCommand(e)&&this.isBuiltInCommand(e)?new Z[e](this.customCommands[e],n[0],null,s):new Z[e](s,n[0]):s(null,!1)}else s(null,!1)}purgeQueuedCalls(){const e=this.callQueue;this.callQueue=[],e.forEach((e=>{window[ee](...e)}))}isCustomCommand(e){return this.customCommands&&"function"==typeof this.customCommands[e]}isBuiltInCommand(e){return void 0!==Z[e]}}class se{callResponder;isServiceSpecific;numUpdates=0;constructor(e,t,s=!1,n){this.throwIfInvalidInt(e,"cmpId",2),this.throwIfInvalidInt(t,"cmpVersion",0),H.cmpId=e,H.cmpVersion=t,H.tcfPolicyVersion=5,this.isServiceSpecific=!!s,this.callResponder=new te(n)}throwIfInvalidInt(e,t,s){if(!("number"==typeof e&&Number.isInteger(e)&&e>=s))throw new Error(`Invalid ${t}: ${e}`)}update(e,t=!1){if(H.disabled)throw new Error("CmpApi Disabled");H.cmpStatus=g.LOADED,t?(H.displayStatus=f.VISIBLE,H.eventStatus=w.CMP_UI_SHOWN):void 0===H.tcModel?(H.displayStatus=f.DISABLED,H.eventStatus=w.TC_LOADED):(H.displayStatus=f.HIDDEN,H.eventStatus=w.USER_ACTION_COMPLETE),H.gdprApplies=null!==e,H.gdprApplies?(""===e?(H.tcModel=new O,H.tcModel.cmpId=H.cmpId,H.tcModel.cmpVersion=H.cmpVersion):H.tcModel=x.decode(e),H.tcModel.isServiceSpecific=this.isServiceSpecific,H.tcfPolicyVersion=Number(H.tcModel.policyVersion),H.tcString=e):H.tcModel=null,0===this.numUpdates?this.callResponder.purgeQueuedCalls():H.eventQueue.exec(),this.numUpdates++}disable(){H.disabled=!0,H.cmpStatus=g.ERROR}}new class{constructor(){this.tcModel=null,this.gvl=null,this.cmpApi=null,this.isInitialized=!1,this.consentData={purposes:new Set,vendors:new Set,specialFeatures:new Set,legitimateInterests:new Set},this.initializeCMPApiEarly(),window.addEventListener("wpconsent_banner_initialized",(()=>{this.init()})),window.addEventListener("wpconsent_consent_saved",(e=>{this.handlePreferencesUpdate(e)}))}initializeCMPApiEarly(){try{if(!window.wpconsent)return void console.warn("WPConsent configuration not found, deferring early CMP initialization");const e=parseInt(window.wpconsent.iab_tcf_cmp_id||999,10),t=parseInt(window.wpconsent.iab_tcf_cmp_version||1,10),s=window.wpconsent.iab_tcf_service_specific||!1;this.cmpApi=new se(e,t,s);const n=this.getStoredTCString();n?this.cmpApi.update(n,!1):this.cmpApi.update("",!1),window.WPConsentCMPAPI=this}catch(e){console.error("Error during early CMP API initialization:",e)}}async init(){try{if(!window.wpconsent||!window.wpconsent.iab_tcf_baseurl)return void console.warn("IAB TCF GVL configuration not found");F.baseUrl=window.wpconsent.iab_tcf_baseurl,this.gvl=new F,await this.gvl.readyPromise;const e=window.wpconsent.iab_tcf_enabled_vendors||[];if(e.length>0&&this.gvl.narrowVendorsTo(e),this.tcModel=new O(this.gvl),this.tcModel.cmpId=parseInt(window.wpconsent.iab_tcf_cmp_id||999,10),this.tcModel.cmpVersion=parseInt(window.wpconsent.iab_tcf_cmp_version||1,10),this.tcModel.consentScreen=1,this.tcModel.consentLanguage=window.wpconsent.iab_tcf_language||"EN",this.tcModel.isServiceSpecific=window.wpconsent.iab_tcf_service_specific||!1,e.length>0?e.forEach((e=>{this.tcModel.vendorsDisclosed.set(e)})):this.gvl&&this.gvl.vendors&&Object.keys(this.gvl.vendors).forEach((e=>{this.tcModel.vendorsDisclosed.set(parseInt(e,10))})),!this.cmpApi){const e=parseInt(window.wpconsent.iab_tcf_cmp_id||999,10),t=parseInt(window.wpconsent.iab_tcf_cmp_version||1,10),s=window.wpconsent.iab_tcf_service_specific||!1;this.cmpApi=new se(e,t,s)}this.loadExistingConsent(),this.performInitialCMPUpdate(),this.isInitialized=!0,window.WPConsentCMPAPI=this}catch(e){console.error("Error initializing CMP API:",e)}}performInitialCMPUpdate(){if(this.cmpApi)try{let e="";if(this.tcModel)try{e=x.encode(this.tcModel)}catch(t){console.warn("Failed to encode TCString from TCModel:",t),e=this.getStoredTCString()||""}else e=this.getStoredTCString()||"";const t=this.isUICurrentlyVisible();this.cmpApi.update(e,t)}catch(e){console.warn("Error during CMP API update after full initialization:",e);try{this.cmpApi.update("",!1)}catch(e){console.error("Failed to update CMP API with fallback:",e)}}else console.warn("CMP API not available for update")}loadExistingConsent(){try{const e=this.getStoredTCString();if(e){const t=x.decode(e,this.tcModel);this.tcModel=t;const s=window.wpconsent.iab_tcf_enabled_vendors||[];s.length>0&&(this.tcModel.vendorsDisclosed.empty(),s.forEach((e=>{this.tcModel.vendorsDisclosed.set(e)}))),this.updateConsentDataFromTCModel()}}catch(e){console.warn("Error loading existing consent:",e)}}getStoredTCString(){try{const e=localStorage.getItem("wpconsent_tcstring");if(e)return e}catch(e){}const e=document.cookie.split(";");for(let t of e){const[e,s]=t.trim().split("=");if("wpconsent_tcstring"===e)return decodeURIComponent(s)}return null}updateConsentDataFromTCModel(){if(this.tcModel){this.consentData.purposes.clear();for(const e of this.tcModel.purposeConsents)this.consentData.purposes.add(e);this.consentData.vendors.clear();for(const e of this.tcModel.vendorConsents)this.consentData.vendors.add(e);this.consentData.specialFeatures.clear();for(const e of this.tcModel.specialFeatureOptins)this.consentData.specialFeatures.add(e);this.consentData.legitimateInterests.clear();for(const e of this.tcModel.purposeLegitimateInterests)this.consentData.legitimateInterests.add(e)}}handlePreferencesUpdate(e){if(!this.isInitialized)return void console.warn("CMP API not initialized yet");const t=e.detail||{};t&&this.updateConsentFromPreferences(t)}updateConsentFromPreferences(e){if(!this.tcModel||!window.WPConsent?.shadowRoot)return;let t=[],s=[];for(const n in e){if(n.startsWith("iab_purpose_")&&!0===e[n]){const e=parseInt(n.replace("iab_purpose_",""),10);isNaN(e)||t.push(e)}if(n.startsWith("iab_purpose_legint_")&&!0===e[n]){const e=parseInt(n.replace("iab_purpose_legint_",""),10);isNaN(e)||s.push(e)}}const n=this.gvl?.purposes?Object.keys(this.gvl.purposes).length:0,o=n>0&&t.length===n;let i=[],r=[];if(o&&window.wpconsent.iab_tcf_enabled_vendors)i=window.wpconsent.iab_tcf_enabled_vendors.slice();else{const e=window.WPConsent.shadowRoot?.querySelectorAll('input[name="wpconsent_tcf_vendor_consent[]"]:checked');e&&e.forEach((e=>{const t=parseInt(e.value,10);isNaN(t)||i.push(t)}))}const a=window.WPConsent.shadowRoot?.querySelectorAll('input[name="wpconsent_tcf_vendor_legint[]"]:checked');if(a&&a.forEach((e=>{const t=parseInt(e.value,10);isNaN(t)||r.push(t)})),this.gvl&&this.gvl.vendors&&r.length>0){const e=new Set;r.forEach((t=>{const s=this.gvl.vendors[t];s&&s.legIntPurposes&&s.legIntPurposes.forEach((t=>{e.add(t)}))})),s=Array.from(e)}let c=[];const l=window.WPConsent.shadowRoot?.querySelectorAll('input[name="wpconsent_tcf_special_feature[]"]:checked');l&&l.forEach((e=>{const t=parseInt(e.value,10);isNaN(t)||c.push(t)})),this.consentData.vendors=new Set(i),this.updateTCModelVectors(t,i,r,s,c),this.consentData.purposes=new Set(t);const d=this.isUICurrentlyVisible();this.saveConsent(d).catch((e=>{console.error("Error saving consent after preferences update:",e)}))}updateTCModelVectors(e,t=[],s=[],n=[],o=[]){if(!this.tcModel)return;this.tcModel.vendorConsents.empty(),this.tcModel.vendorLegitimateInterests.empty(),this.tcModel.purposeConsents.empty(),this.tcModel.purposeLegitimateInterests.empty(),this.tcModel.specialFeatureOptins.empty(),this.tcModel.vendorsDisclosed.empty(),this.tcModel.publisherConsents.empty(),this.tcModel.publisherLegitimateInterests.empty();const i=this.applyPublisherRestrictions({purposes:e,vendorsConsent:t,vendorsLegint:s,purposeLegints:n,specialFeatures:o});i.purposes.forEach((e=>{this.tcModel.purposeConsents.set(e)})),i.purposeLegints.forEach((e=>{this.tcModel.purposeLegitimateInterests.set(e)})),i.vendorsConsent.forEach((e=>{this.tcModel.vendorConsents.set(e)})),i.vendorsLegint.forEach((e=>{this.tcModel.vendorLegitimateInterests.set(e)})),i.specialFeatures.forEach((e=>{this.tcModel.specialFeatureOptins.set(e)})),this.setPublisherRestrictions(),this.setPublisherDeclarations();const r=window.wpconsent.iab_tcf_enabled_vendors||[];r.length>0?r.forEach((e=>{this.tcModel.vendorsDisclosed.set(e)})):this.gvl&&this.gvl.vendors&&Object.keys(this.gvl.vendors).forEach((e=>{this.tcModel.vendorsDisclosed.set(parseInt(e,10))}));const a=new Date;a.setHours(0,0,0,0),this.tcModel.lastUpdated=a,this.tcModel.created=a}applyPublisherRestrictions(e){const t=window.wpconsent?.iab_tcf_publisher_restrictions;if(!t||!t.global&&!t.vendors)return e;const s={purposes:[...e.purposes],vendorsConsent:[...e.vendorsConsent],vendorsLegint:[...e.vendorsLegint],purposeLegints:[...e.purposeLegints],specialFeatures:[...e.specialFeatures]};if(t.global&&t.global.disallow_li_purposes){const e=t.global.disallow_li_purposes;e.includes("all")?(s.purposeLegints=[],s.vendorsLegint=[]):Array.isArray(e)&&e.length>0&&(s.purposeLegints=s.purposeLegints.filter((t=>!e.includes(t))),this.gvl&&this.gvl.vendors&&(s.vendorsLegint=s.vendorsLegint.filter((t=>{const s=this.gvl.vendors[t];return!(!s||!s.legIntPurposes)&&s.legIntPurposes.filter((t=>!e.includes(t))).length>0}))))}return t.vendors&&Object.keys(t.vendors).length>0&&Object.entries(t.vendors).forEach((([e,t])=>{const n=parseInt(e,10);if(t.disallowed_purposes&&t.disallowed_purposes.length>0&&this.gvl&&this.gvl.vendors&&this.gvl.vendors[n]){const e=this.gvl.vendors[n];0===(e.purposes?.filter((e=>!t.disallowed_purposes.includes(e)))||[]).length&&e.purposes&&e.purposes.length>0&&(s.vendorsConsent=s.vendorsConsent.filter((e=>e!==n)))}if(t.require_consent_for_li&&t.require_consent_for_li.length>0&&this.gvl&&this.gvl.vendors&&this.gvl.vendors[n]){const e=this.gvl.vendors[n];0===(e.legIntPurposes?.filter((e=>!t.require_consent_for_li.includes(e)))||[]).length&&e.legIntPurposes&&e.legIntPurposes.length>0&&(s.vendorsLegint=s.vendorsLegint.filter((e=>e!==n))),s.purposeLegints=s.purposeLegints.filter((e=>!t.require_consent_for_li.includes(e)))}})),s}setPublisherRestrictions(){if(!this.tcModel||!this.tcModel.publisherRestrictions)return;const e=window.wpconsent?.iab_tcf_publisher_restrictions;e&&e.vendors&&Object.entries(e.vendors).forEach((([e,t])=>{const s=parseInt(e,10);t.disallowed_purposes&&t.disallowed_purposes.length>0&&t.disallowed_purposes.forEach((e=>{const t=new v(e,l.NOT_ALLOWED);this.tcModel.publisherRestrictions.add(s,t)})),t.require_consent_for_li&&t.require_consent_for_li.length>0&&t.require_consent_for_li.forEach((e=>{const t=new v(e,l.REQUIRE_CONSENT);this.tcModel.publisherRestrictions.add(s,t)}))}))}setPublisherDeclarations(){if(!this.tcModel)return;const e=window.wpconsent?.iab_tcf_publisher_declarations;e&&(e.purposes_consent&&Array.isArray(e.purposes_consent)&&e.purposes_consent.forEach((e=>{this.tcModel.publisherConsents.set(e)})),e.purposes_li_transparency&&Array.isArray(e.purposes_li_transparency)&&e.purposes_li_transparency.forEach((e=>{this.tcModel.publisherLegitimateInterests.set(e)})))}async saveConsent(e=!1){if(!this.isInitialized||!this.tcModel||!this.cmpApi)throw new Error("CMP API not properly initialized");try{const t=x.encode(this.tcModel);return this.cmpApi.update(t,e),this.storeTCString(t),t}catch(e){throw console.error("Error saving consent:",e),e}}storeTCString(e){try{localStorage.setItem("wpconsent_tcstring",e)}catch(e){console.warn("Could not store in localStorage:",e)}const t=new Date;t.setTime(t.getTime()+31536e6);const s=`wpconsent_tcstring=${encodeURIComponent(e)}; expires=${t.toUTCString()}; path=/; SameSite=Lax`;document.cookie=s}triggerConsentSavedEvent(e){const t=new CustomEvent("wpconsent_consent_saved",{detail:{tcString:e,consentData:{vendors:Array.from(this.consentData.vendors),purposes:Array.from(this.consentData.purposes),specialFeatures:Array.from(this.consentData.specialFeatures),legitimateInterests:Array.from(this.consentData.legitimateInterests)},timestamp:(new Date).toISOString()}});window.dispatchEvent(t)}getConsentData(){return{tcString:this.tcModel?x.encode(this.tcModel):null,vendors:Array.from(this.consentData.vendors),purposes:Array.from(this.consentData.purposes),specialFeatures:Array.from(this.consentData.specialFeatures),legitimateInterests:Array.from(this.consentData.legitimateInterests),isInitialized:this.isInitialized,lastUpdated:this.tcModel?.lastUpdated?.toISOString()||null,created:this.tcModel?.created?.toISOString()||null}}hasVendorConsent(e){return this.consentData.vendors.has(e)}hasPurposeConsent(e){return this.consentData.purposes.has(e)}clearConsent(){this.consentData.vendors.clear(),this.consentData.purposes.clear(),this.consentData.specialFeatures.clear(),this.consentData.legitimateInterests.clear(),this.tcModel&&(this.tcModel.vendorConsents.empty(),this.tcModel.purposeConsents.empty(),this.tcModel.specialFeatureOptins.empty(),this.tcModel.purposeLegitimateInterests.empty(),this.tcModel.vendorsDisclosed.empty(),this.tcModel.lastUpdated=new Date);try{localStorage.removeItem("wpconsent_tcstring")}catch(e){}document.cookie="wpconsent_tcstring=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",window.dispatchEvent(new CustomEvent("wpconsent_consent_cleared"))}isUICurrentlyVisible(){try{const e=document.querySelector("#wpconsent-container");if(!e||!e.shadowRoot)return!1;const t=e.shadowRoot.querySelector("#wpconsent-banner-holder");if(t&&t.classList.contains("wpconsent-banner-visible"))return!0;const s=e.shadowRoot.querySelector(".wpconsent-preferences-modal, #wpconsent-preferences, .wpconsent-tcf-preferences");if(s){const e=window.getComputedStyle(s);if("none"!==e.display&&"hidden"!==e.visibility&&"0"!==e.opacity)return!0}return!1}catch(e){return console.warn("Error checking UI visibility:",e),!1}}notifyUIVisible(){if(this.cmpApi)try{let e="";if(this.tcModel)try{e=x.encode(this.tcModel)}catch(t){console.warn("Failed to encode TCString from TCModel:",t),e=this.getStoredTCString()||""}else e=this.getStoredTCString()||"";this.cmpApi.update(e,!0)}catch(e){console.warn("Error notifying CMP API about UI visibility:",e)}else console.warn("CMP API not available, cannot notify UI visible")}notifyUIHidden(){if(this.cmpApi)try{let e="";if(this.tcModel)try{e=x.encode(this.tcModel)}catch(t){console.warn("Failed to encode TCString from TCModel:",t),e=this.getStoredTCString()||""}else e=this.getStoredTCString()||"";this.cmpApi.update(e,!1)}catch(e){console.warn("Error notifying CMP API about UI hidden:",e)}else console.warn("CMP API not available, cannot notify UI hidden")}},new class{constructor(){this.gvl=null,this.vendorCount=0,window.addEventListener("wpconsent_banner_initialized",(()=>{this.init()}))}async init(){try{if(!window.wpconsent||!window.wpconsent.iab_tcf_enabled_vendors)return;if(!window.wpconsent.iab_tcf_baseurl)return void console.warn("IAB TCF GVL configuration not found for banner message");F.baseUrl=window.wpconsent.iab_tcf_baseurl,this.gvl=new F,await this.gvl.readyPromise;const e=window.wpconsent.iab_tcf_enabled_vendors||[];this.vendorCount=e.length,this.replacePlaceholder(),this.setupVendorsLink()}catch(e){console.error("Error initializing IAB TCF banner message handler:",e)}}replacePlaceholder(){if(!window.WPConsent||!window.WPConsent.shadowRoot)return void console.warn("Shadow root not available for banner message replacement");const e=window.WPConsent.shadowRoot.querySelector(".wpconsent-banner-message");if(!e)return void console.warn("Banner message element not found");let t=e.innerHTML;t.includes("[number_of_vendors]")&&(t=t.replace("[number_of_vendors]",this.vendorCount.toString()),e.innerHTML=t)}setupVendorsLink(){if(!window.WPConsent||!window.WPConsent.shadowRoot)return void console.warn("Shadow root not available for vendors link setup");const e=window.WPConsent.shadowRoot.querySelector("#wpconsent-view-vendors-link");e&&e.addEventListener("click",(e=>{e.preventDefault(),window.WPConsent&&"function"==typeof window.WPConsent.showPreferences&&(window.WPConsent.showPreferences(),setTimeout((()=>{if(window.WPConsentIABTabs&&"function"==typeof window.WPConsentIABTabs.switchTab){const e=window.WPConsent.shadowRoot?.querySelector('.wpconsent-tcf-tab-button[data-tab="vendors"]');e&&window.WPConsentIABTabs.switchTab(e)}}),100))}))}},s(2613),s(8876)})()})();